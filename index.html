<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>chaoyao</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Seize the day ~ enjoy my life!">
<meta property="og:type" content="website">
<meta property="og:title" content="chaoyao">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="chaoyao">
<meta property="og:description" content="Seize the day ~ enjoy my life!">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="chaoyao">
<meta name="twitter:description" content="Seize the day ~ enjoy my life!">
  
    <link rel="alternative" href="/atom.xml" title="chaoyao" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://tp3.sinaimg.cn/3556667770/180/5710770124/1" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">chaoyao.z</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Jobs的Blogs</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/prettychaoyao" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/u/3556667770/home" title="weibo">weibo</a>
					        
								<a class="mail" target="_blank" href="/jobs.z@51offer.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/博客/" style="font-size: 10px;">博客</a> <a href="/tags/开发效率/" style="font-size: 10px;">开发效率</a> <a href="/tags/效率/" style="font-size: 10px;">效率</a> <a href="/tags/研发杂谈/" style="font-size: 10px;">研发杂谈</a> <a href="/tags/网站/" style="font-size: 10px;">网站</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.tomatopeter.com/">潘君的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://ioi.im/">曾铭的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://51offer.github.io">51offer移动租周分享</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">爱折腾的技术宅，立志在互联网做些好玩的事儿。如果你相信技术拥有强大的力量，不妨让我和你一起切磋。。。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">chaoyao.z</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://tp3.sinaimg.cn/3556667770/180/5710770124/1" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">chaoyao.z</h1>
			</hgroup>
			
			<p class="header-subtitle">Jobs的Blogs</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/prettychaoyao" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/u/3556667770/home" title="weibo">weibo</a>
			        
						<a class="mail" target="_blank" href="/jobs.z@51offer.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Why-Git-Learn-It" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/07/Why-Git-Learn-It/" class="article-date">
  	<time datetime="2016-01-06T16:00:00.000Z" itemprop="datePublished">2016-01-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/07/Why-Git-Learn-It/">Why Git? Learn It!</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="总览">总览</h2><ul>
<li>为什么要用 Git？</li>
<li>Git + SourceTree + Gitlab 的使用演示</li>
<li>提醒和推荐</li>
</ul>
<h2 id="为什么要用_Git？">为什么要用 Git？</h2><ul>
<li>一个工具、一套方案，解决源码管理的问题</li>
</ul>
<h3 id="对于版本控制，我们需要什么？">对于版本控制，我们需要什么？</h3><ul>
<li>代码历史追溯<ul>
<li>某一次提交的改动（SVN，Git）</li>
<li>某一个功能的改动过程（好的提交习惯更重要，在多人协作情况下提交历史更清晰）</li>
</ul>
</li>
<li>协同开发<ul>
<li>用分支来隔离上线与开发中的代码</li>
<li>多人多线并行开发：1 人对 N 线，N 人对 1 线都有可能</li>
</ul>
</li>
</ul>
<blockquote>
<p>秒极定律<br>一件事情如果能控制在 10s 内完成，人们就会极频繁的使用它。<br>举栗子：</p>
<ul>
<li>docker 被推崇，从虚拟机到 Vagrant 到 docker，碰到了秒级定律</li>
<li>持续集成，快速迭代</li>
</ul>
</blockquote>
<h3 id="秒级的代码管理？">秒级的代码管理？</h3><ul>
<li>本地代码飞快变化至任意历史提交记录：SVN 30s-2min；Git 秒级<ul>
<li>工作状态快速切换</li>
</ul>
</li>
<li>代码提交速度飞快：SVN 受限于网络速度；Git commit 秒级，push 受限于网络速度</li>
<li>代码创建、切换、合并分支飞快：SVN 速度慢，很麻烦；Git 赞！<ul>
<li>勇于原型探索，历史清晰，易调整方向，易新建，易弃用</li>
<li>与 code review 结合</li>
</ul>
</li>
</ul>
<h2 id="SVN_比_Git_好在哪里">SVN 比 Git 好在哪里</h2><ul>
<li>更简单，符合原有自主文件夹管理版本的心理预期<ul>
<li>Git 暴露概念过多，学习曲线陡峭，这点不如 hg</li>
</ul>
</li>
<li>SVN 有目录级的权限控制<ul>
<li>适合大中型中间件软件公司：目录划分权限，职能长期固定</li>
</ul>
</li>
<li>也许还有其它，我不清楚</li>
</ul>
<h3 id="Git_真实的影响力">Git 真实的影响力</h3><blockquote>
<p>I’m an egotistical bastard, and I name all my projects after myself. First Linux, now Git.<br>—— Linus</p>
</blockquote>
<ul>
<li>在 2016 问这个问题对互联网来说已是大势所趋<ul>
<li>npm + pip 均托管在 Github</li>
<li>OpenJDK 使用 Hg（Mercurial）</li>
<li>Github 早已一统开源天下，Java 概莫能外</li>
</ul>
</li>
<li>SVN 与 Git 二分天下，但 Git 占据的是互联网明星创业公司和 BAT 的优秀团队，为何？</li>
<li>会 Git 找工作是加分项</li>
<li>学习版本控制的另一种思维方式（学习一门语言就是学习一类思维方式）</li>
</ul>
<h2 id="一些问题">一些问题</h2><ul>
<li>Git 不能直接解决目前后端的开发环境<ul>
<li>code 规范的 branch 流程</li>
<li>依赖，理清 maven 依赖和配合方式</li>
<li>秒级上线（测试、预发布、正式）</li>
<li>相应（尽可能少人力介入的）自动化测试、监控</li>
</ul>
</li>
</ul>
<h2 id="Git_+_SourceTree_+_Gitlab_的使用演示">Git + SourceTree + Gitlab 的使用演示</h2><p><img src="http://7j1xgb.com5.z0.glb.clouddn.com/FullSizeRender.jpg" alt="Git 使用流程示意图"></p>
<h3 id="local_repo">local repo</h3><ul>
<li>用 SourceTree 初始化一个本地项目</li>
<li>小步提交，介绍 staged 的用法<ul>
<li>stage or unstage or discard</li>
<li>stage 某一行代码</li>
</ul>
</li>
<li>一次提交</li>
<li>介绍 master 分支及 branchs 界面<ul>
<li>留意 commit 编号</li>
</ul>
</li>
<li>创建一个分支 feature/login</li>
<li>新建 login.java 文件，index.html 加一行代码</li>
<li>commit，观察分支树变化</li>
<li>切换分支，观察代码变化</li>
<li>创建一个分支 feature/share</li>
<li>新建 share.py 文件，index.html 改一行代码</li>
<li>commit，观察分支树变化</li>
<li>切回 feature/login，临时处理事情，再切回 feature/share</li>
<li>feature/share 分支删几行代码，再提交一次</li>
<li>feature/share merge to master 分支，观察分支树变化</li>
<li>feature/login merge to master 分支，处理冲突</li>
<li>初始化 Git-flow</li>
<li>新建 feature/school 分支，commit once</li>
<li>用 Git-flow-gui 完成 feature/school 分支</li>
<li>留意刚才的所有提交都在本地，思考与 SVN 区别（很像，只是分支极灵活）</li>
<li>Q&amp;A</li>
</ul>
<h3 id="Gitlab">Gitlab</h3><ul>
<li>注册帐号，ssh-key 授权（略）</li>
<li>介绍 Gitlab 结构：team-project</li>
<li>新建项目 test-repo</li>
<li>留意空项目向导，复制代码库 url</li>
<li>本地配置 remote-url，观察 remotes 变化</li>
<li>push，注意是 push 多条分支，留意 local-remote 分支对应关系</li>
<li>再看 remotes 变化，分支树变化<ul>
<li>remotes branchs 与 local branchs 一致</li>
<li>分支树中多了 origin/*</li>
</ul>
</li>
<li>观察 Gitlab 界面变化</li>
<li>介绍 Gitlab 单个项目界面</li>
<li>Q&amp;A</li>
</ul>
<h3 id="来一次典型的开发过程（包含_code_review）">来一次典型的开发过程（包含 code review）</h3><ul>
<li>保证在 develop 分支，pull 最新代码</li>
<li>网页端提交 readme 文件，造成 origin 变化，介绍 fetch，注意 branchs 变化</li>
<li>重新 pull</li>
<li>用 Git-flow-gui 建立 feature/news 分支</li>
<li>产生两次 commit（包含 rename 文件）</li>
<li>留意分支树变化，注意 Gitlab-web 端不存在刚才的提交，push，再对比</li>
<li>Gitlab-web 端新建 merge-request, 留意 source-branch, target-branch, title, ass</li>
<li>被指派者 review 代码，web 端回复建议</li>
<li>根据建议产生新的 commit，同时 push</li>
<li>刷新 web 端观察变化：查看一次 commit，查看全部 changes</li>
<li>被指派者回复 LGTM（look good to me），点击 merge</li>
<li>回到 SourceTree，观察分支树变化，fetch 再看</li>
<li>切回 develop 分支</li>
<li>Q&amp;A<ul>
<li>有冲突 merge 按钮会不可点击，merge develop to work_branch ，在 develop 分支外解决冲突，commit&amp;push，merge 按钮就可点击了</li>
<li>可方便的与自动化测试等结合起来</li>
</ul>
</li>
</ul>
<h2 id="提醒和推荐">提醒和推荐</h2><h2 id="一些提醒（坑）">一些提醒（坑）</h2><ul>
<li>初次使用 Git，注意设置 <code>git config --global email&amp;name</code></li>
<li>Windows 下的 Git 使用的确有些不便（不过我不熟悉，也不清楚具体问题）</li>
<li>授权方式推荐 ssh-key</li>
<li>忽略文件的配置</li>
<li>着手代码前思考终极问题：『我在哪里，要去何处？』（先认清所在分支，pull）</li>
<li>commit 已经 push 到远端了，这个时候不要想着再去修改了</li>
<li>学习新东西，坑总是有的，多填了也就会了</li>
</ul>
<h3 id="一些推荐">一些推荐</h3><ul>
<li>强调思路，记住秒级定律，效率为王</li>
<li>小步提交，每小时至少提交一次<ul>
<li>一次任务的实现过程：整体设计，框架（类），接口，单元测试，实现</li>
</ul>
</li>
<li>完整提交，完整提交，必须完整提交！不该有任一个提交项目不可运行。</li>
<li>保证非工作期间，工作区间干净</li>
<li>不想提交但要切换分支处理事物用 stash 处理</li>
<li>Github 经常被 X<ul>
<li>coding.net 代码私有库托管可以用。找开源代码，永远是 Github</li>
<li>Google 也是被 X。珍爱生命，自配 VPN</li>
</ul>
</li>
<li>国内 Git 私有库托管推荐 coding.net，国外推荐 bitbucket（支持hg） 和 Gitlab</li>
</ul>
<h2 id="其它">其它</h2><ul>
<li>依赖（迷信）工具不可取，但工具会影响思维方式，而思维方式非常重要</li>
</ul>
<blockquote>
<p>举例：<br>SVN 的思维方式决定了 diff patch 的开源合作方式。交流不顺畅，实现思路难以程现，这种合作方式很长时间里都是高端人士的特权。<br>Git + Github 催生了 fork，成就了最大的程序员社交网站，也极力促进了开源社区的发展。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/技术部分享/">技术部分享</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-周精益分享- 前端入门篇2期" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/11/周精益分享- 前端入门篇2期/" class="article-date">
  	<time datetime="2015-12-11T10:30:00.000Z" itemprop="datePublished">2015-12-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/11/周精益分享- 前端入门篇2期/">周精益分享 - 前端入门篇2期</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="博客地址"><a href="">博客地址</a></h3><h2 id="Swift柯里化_Curring_学习">Swift柯里化 Curring 学习</h2><h3 id="什么是Curring">什么是Curring</h3><blockquote>
<p><a href="https://zh.wikipedia.org/wiki/%E6%9F%AF%E9%87%8C%E5%8C%96" target="_blank" rel="external">维基百科解释</a><br>在计算机科学中，柯里化（英语：Currying），又译为卡瑞化或加里化，是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术。</p>
</blockquote>
<p>概念看上去还是有点抽象，直接看代码</p>
<p><strong>例子</strong><br>注：所有swift代码都可以放到playgroun中运行查看输出<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">UIKit</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个普通求sum函数</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a: Int, b: Int, <span class="built_in">c</span>: Int)</span></span> -&gt; <span class="type">Int</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"<span class="subst">\(a)</span> + <span class="subst">\(b)</span> + <span class="subst">\(<span class="built_in">c</span>)</span> = <span class="subst">\(a + b + <span class="built_in">c</span>)</span>"</span>)</span><br><span class="line">    <span class="keyword">return</span> a + b + <span class="built_in">c</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add(<span class="number">1</span>, b: <span class="number">2</span>,<span class="built_in">c</span>: <span class="number">3</span>) <span class="comment">// 打印1 + 2 + 3 = 6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 柯里化版本的求sum函数</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">addCur</span><span class="params">(a: Int)</span></span>(b: <span class="type">Int</span>)(<span class="built_in">c</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"<span class="subst">\(a)</span> + <span class="subst">\(b)</span> + <span class="subst">\(<span class="built_in">c</span>)</span> = <span class="subst">\(a + b + <span class="built_in">c</span>)</span>"</span>)</span><br><span class="line">    <span class="keyword">return</span> a + b + <span class="built_in">c</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addCur(<span class="number">1</span>)(b: <span class="number">2</span>)(<span class="built_in">c</span>: <span class="number">3</span>) <span class="comment">// 打印1 + 2 + 3 = 6</span></span><br></pre></td></tr></table></figure></p>
<p>你也许觉得Curring只是用一个特殊的写法<br>其他与普通函数无异<br>那么换一种curring的调用方式</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// curring 另类调用方式</span></span><br><span class="line">let funcWithA = <span class="function"><span class="title">addCur</span><span class="params">(<span class="number">1</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"funcWithA type : \(funcWithA.dynamicType)"</span>)</span></span></span><br><span class="line">let funcWithAB = <span class="function"><span class="title">funcWithA</span><span class="params">(b: <span class="number">2</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"funcWithAB type : \(funcWithAB.dynamicType)"</span>)</span></span></span><br><span class="line">let resultCurring = <span class="function"><span class="title">funcWithAB</span><span class="params">(c: <span class="number">3</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"resultCurring type : \(resultCurring.dynamicType)"</span>)</span></span></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">此时你还是会觉得这只是把一个函数拆开来调用了 那么我们打印一下 每个调用步骤中变量的类型</span><br></pre></td></tr></table></figure>
<p>let funcWithA = addCur(1)<br>print(“funcWithA type : (funcWithA.dynamicType)”) //<br>let funcWithAB = funcWithA(b: 2)<br>print(“funcWithAB type : (funcWithAB.dynamicType)”)<br>let resultCurring = funcWithAB(c: 3)<br>print(“resultCurring type : (resultCurring.dynamicType)”)<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">打印结果为</span><br></pre></td></tr></table></figure></p>
<p>1 + 2 + 3 = 6<br>funcWithA type : Int -&gt; Int -&gt; Int<br>funcWithAB type : Int -&gt; Int<br>1 + 2 + 3 = 6<br>resultCurring type : Int<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">可以看到 变量funcWithA 为 Int -&gt; Int -&gt; Int 类型</span><br><span class="line">funcWithAB 为Int -&gt; Int</span><br><span class="line"></span><br><span class="line">这说明 curring函数在绑定最后一个参数之前 每个步骤返回的值都是一个函数</span><br><span class="line"></span><br><span class="line"><span class="header">###Curring实现原理</span></span><br><span class="line"></span><br><span class="line">Swift实现Curring的基础有两个</span><br><span class="line"><span class="bullet">- </span>函数是一级公民</span><br><span class="line"><span class="bullet">- </span>闭包</span><br><span class="line"></span><br><span class="line">[<span class="link_label">啊崢的Swift Curring文章</span>](<span class="link_url">http://www.jianshu.com/p/6eaacadafa1a</span>)代码例子解释的已经很清楚了</span><br></pre></td></tr></table></figure></p>
<p>class Currying<br>{<br>    /<strong><em> uncurried:普通函数 </em></strong>/<br>    // 接收多个参数的函数<br>    func add(a: Int, b: Int, c: Int) -&gt; Int{<br>        println(“(a) + (b) + (c)”)<br>        return a + b + c<br>    }</p>
<pre><code><span class="comment">/*** 手动实现柯里化函数 ***/</span>
<span class="comment">// 把上面的函数转换为柯里化函数，首先转成接收第一个参数a，并且返回接收余下第一个参数b的新函数（采用闭包）</span>
<span class="comment">// 为了让大家都能看懂,我帮你们拆解来看下</span>
<span class="comment">// (a: Int) : 参数</span>
<span class="comment">// (b:Int) -&gt; (c: Int) -&gt; Int : 函数返回值（一个接收参数b的函数,并且这个函数又返回一个接收参数c,返回值为Int类型的函数)</span>

<span class="comment">// 定义一个接收参数a,并且返回一个接收参数b的函数,并且这个函数又返回一个接收参数c,返回值为Int类型的函数</span>
<span class="func"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a: Int)</span></span> -&gt; (b:<span class="type">Int</span>) -&gt; (<span class="built_in">c</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span>{

    <span class="comment">// 一个接收参数b的函数,并且这个函数又返回一个接收参数c,返回值为Int类型的函数</span>
    <span class="keyword">return</span> { (b:<span class="type">Int</span>) -&gt; (<span class="built_in">c</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="keyword">in</span>

        <span class="comment">// 返回一个接收余下第一个参数c，并且有返回结果为Int类型的函数</span>
        <span class="keyword">return</span> { (<span class="built_in">c</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="keyword">in</span>

            <span class="keyword">return</span> a + b + <span class="built_in">c</span>;

 注解： 这里为什么能使用参数a,b,<span class="built_in">c</span>?
       利用闭包的值捕获特性，即使这些值作用域不在了，也可以捕获到他们的值。
       闭包会自动判断捕获的值是值拷贝还是值引用，如果修改了，就是值引用，否则值拷贝。

       注意只有在闭包中才可以，a,b,<span class="built_in">c</span>都在闭包中。

        }

    }

}


<span class="comment">/*** curried: 系统自带的柯里化函数 ***/</span>
<span class="func"><span class="keyword">func</span> <span class="title">addCur</span><span class="params">(a: Int)</span></span>(b: <span class="type">Int</span>)(<span class="built_in">c</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span>{
    <span class="built_in">println</span>(<span class="string">"<span class="subst">\(a)</span> + <span class="subst">\(b)</span> + <span class="subst">\(<span class="built_in">c</span>)</span>"</span>)
    <span class="keyword">return</span> a + b + <span class="built_in">c</span>
}
</code></pre><p>}<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="header">###OC版的Curring</span></span><br><span class="line"></span><br><span class="line">大部分的iOS程序员都还是习惯写OC 找了一个[<span class="link_label">OC版本的Curring</span>](<span class="link_url">https://gist.github.com/lukhnos/1771842</span>)实现 我们可以理解的更深刻</span><br></pre></td></tr></table></figure></p>
<h1 id="include">include <stdio.h></stdio.h></h1><p>int f(int x, int y)<br>{<br>    return x + y;<br>}</p>
<p>int main()<br>{<br>    // 闭包1 绑定第一个参数<br>    typedef int (^int_to_int_t)(int);<br>    // 闭包2 绑定第二个参数<br>    typedef int_to_int_t (^int_to_int_to_int_t)(int);</p>
<pre><code><span class="keyword">int_to_int_to_int_t</span> h = ^(<span class="keyword">int</span> x) {
    <span class="keyword">int_to_int_t</span> g = ^(<span class="keyword">int</span> y) {
        <span class="comment">// 将两个闭包持有的参数做处理 返回结果</span>
        <span class="keyword">return</span> f(x, y);  
    };

    <span class="keyword">return</span> g;        
};

<span class="comment">// 第一个闭包持有 5</span>
<span class="keyword">int_to_int_t</span> g = h(<span class="number">5</span>);

<span class="keyword">int</span> z;
<span class="comment">// 第二个闭包持有10 并返回结果</span>
z = g(<span class="number">10</span>);
<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, z);
</code></pre><p>}<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="header">###什么？你觉得然并卵！</span></span><br><span class="line"></span><br><span class="line">你一定觉得这是一个然并卵的东西</span><br><span class="line"></span><br><span class="line">好吧 我第一个看到的时候 只是觉得有趣 其实也没有想到较好的应用场景 </span><br><span class="line"></span><br><span class="line">[<span class="link_label">为什么要柯里化</span>](<span class="link_url">https://gist.github.com/jcouyang/b56a830cd55bd230049f</span>)这篇文章提供的例子给了很多启发</span><br><span class="line"></span><br><span class="line">用Swift重新实现了一遍 又加了一点打印 豁然开朗</span><br><span class="line"></span><br><span class="line">上代码</span><br></pre></td></tr></table></figure></p>
<p>// 拼接字符<br>func concat(chars: Array<string>) {<br>    var resultString = “”<br>    for char in chars {<br>        resultString += char<br>    }<br>    print(resultString)<br>}</string></p>
<p>concat([“1”,”2”,”3”])<br>print(“<strong><strong><strong>**</strong></strong></strong>“)</p>
<p>// 每个字符代表的数字 + 1 后再拼接<br>func concatAdd(chars: Array<string>, addNum: Int) {<br>    var resultString = “”<br>    for char in chars {<br>        var num = Int(char)!<br>        num = num + addNum<br>        let newChar = String(num)<br>        resultString += newChar<br>    }<br>    print(resultString)<br>}</string></p>
<p>concatAdd([“1”,”2”,”3”], addNum: 1)<br>concatAdd([“1”,”2”,”3”], addNum: 2)<br>concatAdd([“1”,”2”,”3”], addNum: 3)</p>
<p>print(“<strong><strong><strong>**</strong></strong></strong>“)<br>// 每个字符代表的数字 <em>10 后再拼接<br>func concatMultiply(chars: Array<string>, multiplyNum: Int) {<br>    var resultString = “”<br>    for char in chars {<br>        var num = Int(char)!<br>        num = num </string></em> multiplyNum<br>        let newChar = String(num)<br>        resultString += newChar<br>    }<br>    print(resultString)<br>}</p>
<p>concatMultiply([“1”,”2”,”3”], multiplyNum: 1)<br>concatMultiply([“1”,”2”,”3”], multiplyNum: 2)<br>concatMultiply([“1”,”2”,”3”], multiplyNum: 3)</p>
<p>print(“<strong><strong><strong>**</strong></strong></strong>“)<br>/<strong><strong><br>让我们使用柯里化吧<br>*</strong></strong>/<br>func add(a: Int)(b: Int) -&gt; Int{<br>    return a + b<br>}</p>
<p>func multiply(a: Int)(b: Int) -&gt; Int{<br>    return a * b<br>}</p>
<p>func concatByCurring(chars: Array<string>)(caculateFunc: (Int)-&gt;Int) {<br>    var resultString = “”<br>    for char in chars {<br>        var num = Int(char)!<br>        var newNum = caculateFunc(num)<br>        let newChar = String(newNum)<br>        resultString += newChar<br>    }<br>    print(resultString)<br>}</string></p>
<p>concatByCurring([“1”,”2”,”3”])(caculateFunc: add(1))<br>concatByCurring([“1”,”2”,”3”])(caculateFunc: add(2))<br>concatByCurring([“1”,”2”,”3”])(caculateFunc: add(3))</p>
<p>print(“<strong><strong><strong>**</strong></strong></strong>“)<br>concatByCurring([“1”,”2”,”3”])(caculateFunc: multiply(1))<br>concatByCurring([“1”,”2”,”3”])(caculateFunc: multiply(2))<br>concatByCurring([“1”,”2”,”3”])(caculateFunc: multiply(3))</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">以上的代码用普通的函数 和 Curring函数 处理了同一个功能</span><br><span class="line"></span><br><span class="line">Curring优势明显</span><br><span class="line"><span class="bullet">- </span>重用了拼接代码</span><br><span class="line"><span class="bullet">- </span>支持更为灵活的算法替换</span><br><span class="line"><span class="bullet">- </span>写功能扩展的人不用怎么关心老代码的实现</span><br><span class="line"></span><br><span class="line"><span class="header">###iOS开发中可以应用的场景</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**使用Curring处理selector**</span></span><br><span class="line">这个例子是我在看[<span class="link_label">王巍的Swifter</span>](<span class="link_url">https://selfstore.io/~onevcat</span>)时候看到的一个例子</span><br><span class="line"></span><br><span class="line">不废话 直接上代码</span><br></pre></td></tr></table></figure>
<p>// 打印func类型<br>class People: NSObject {<br>    func speak(){<br>        print(“hello”)<br>    }</p>
<pre><code><span class="func"><span class="keyword">func</span> <span class="title">printSpeak</span><span class="params">()</span></span> {
    <span class="built_in">print</span>(<span class="string">"People func speak  : <span class="subst">\(People.speak.<span class="keyword">dynamicType</span>)</span>"</span>)
}
</code></pre><p>}</p>
<p>People().printSpeak()<br>// 打印结果为 People func speak  : People -&gt; () -&gt; ()<br>// 可见实例的方法就是一个Curring结构<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">下面是[<span class="link_label">Instance Methods are Curried Functions in Swift</span>](<span class="link_url">http://oleb.net/blog/2014/07/swift-instance-methods-curried-functions/?utm_campaign=iOS_Dev_Weekly_Issue_157&amp;utm_medium=email&amp;utm_source=iOS%2BDev%2BWeekly</span>)中的例子 很开脑洞</span><br></pre></td></tr></table></figure></p>
<p>//Selector demo<br>protocol TargetAction {<br>    func performAction()<br>}</p>
<p>struct TargetActionWrapper<t: anyobject=""> : TargetAction {<br>    weak var target: T?</t:></p>
<pre><code><span class="comment">// 此处的action类型是不是和我上面代码中打印的结构一致</span>
<span class="built_in">let</span> action: <span class="params">(T)</span> -&gt; <span class="params">()</span> -&gt; <span class="params">()</span>

func performAction<span class="params">()</span> -&gt; <span class="params">()</span> {
    <span class="keyword">if</span> <span class="built_in">let</span> t = target {
        <span class="comment">// Curring调用</span>
        action<span class="params">(t)</span><span class="params">()</span>
    }
}
</code></pre><p>}</p>
<p>enum ControlEvent {<br>    case TouchUpInside<br>    case ValueChanged<br>}</p>
<p>class Control {<br>    var actions = <a href="">ControlEvent: TargetAction</a></p>
<pre><code><span class="func"><span class="keyword">func</span> <span class="title">setTarget</span><span class="generics">&lt;T: AnyObject&gt;</span><span class="params">(target: T, action: <span class="params">(T)</span></span></span> -&gt; () -&gt; (), controlEvent: <span class="type">ControlEvent</span>) {
    actions[controlEvent] = <span class="type">TargetActionWrapper</span>(target: target, action: action)
}

<span class="func"><span class="keyword">func</span> <span class="title">removeTargetForControlEvent</span><span class="params">(controlEvent: ControlEvent)</span></span> {
    actions[controlEvent] = <span class="literal">nil</span>
}

<span class="func"><span class="keyword">func</span> <span class="title">performActionForControlEvent</span><span class="params">(controlEvent: ControlEvent)</span></span> {
    actions[controlEvent]?.performAction()
}
</code></pre><p>}</p>
<p>class MyViewController {<br>    let button = Control()</p>
<pre><code><span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> {
    button.setTarget(<span class="keyword">self</span>, action: <span class="type">MyViewController</span>.onButtonTap, controlEvent: .<span class="type">TouchUpInside</span>)
}

<span class="func"><span class="keyword">func</span> <span class="title">onButtonTap</span><span class="params">()</span></span> {
    <span class="built_in">print</span>(<span class="string">"Button was tapped"</span>)
}
</code></pre><p>}</p>
<p>// 调用<br>MyViewController().onButtonTap()<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="header">###小结</span></span><br><span class="line"><span class="bullet">- </span>Curring让计算过程更清晰 函数式编程的有点初见端倪</span><br><span class="line"><span class="bullet">- </span>Curring让计算过程更独立 可重用</span><br><span class="line"><span class="bullet">- </span>Curring让计算功能扩展更方便</span><br><span class="line"><span class="bullet">- </span>Curring让Swift中Selector的重构可以实现</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="header">## Umeng分享遇到的小坑 -- 张超耀</span></span><br><span class="line"><span class="header">### 写在前面的话</span></span><br><span class="line"><span class="bullet">- </span>在iOS9下，系统默认会拦截对http协议接口的访问，因此无法获取http协议接口的数据。对Umeng来说，具体表现可能是，无法授权、分享、获取用户信息等。</span><br><span class="line"><span class="bullet">- </span>iOS9新建项目默认需要支持bitcode，而不支持bitcode的SDK会导致无法编译运行。[<span class="link_label">App Thining</span>](<span class="link_url">https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AppThinning/AppThinning.html#//apple_ref/doc/uid/TP40012582-CH35</span>)）</span><br><span class="line"></span><br><span class="line">[<span class="link_label">Umeng适配iOS9</span>](<span class="link_url">http://dev.umeng.com/social/ios/ios9</span>)</span><br><span class="line"></span><br><span class="line"><span class="header">### 针对iOS9的Https特性，解决方案</span></span><br><span class="line"><span class="bullet">- </span>Plan A: 暂时退回到http协议:</span><br><span class="line"></span><br><span class="line">&gt;<span class="strong">**1**</span>、在项目的info.plist中添加一个Key：NSAppTransportSecurity，类型为字典类型。</span><br><span class="line">&gt;<span class="strong">**2**</span>、然后给它添加一个Key：NSAllowsArbitraryLoads，类型为Boolean类型，值为YES；</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>Plan B：设置域。可以简单理解成，把不支持https协议的接口设置成http的接口</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;<span class="strong">**1**</span>、在项目的info.plist中添加一个Key：NSAppTransportSecurity，类型为字典类型。</span><br><span class="line"></span><br><span class="line">&gt;<span class="strong">**2**</span>、然后给它添加一个NSExceptionDomains，类型为字典类型；</span><br><span class="line"></span><br><span class="line">&gt;<span class="strong">**3**</span>、把需要的支持的域添加給NSExceptionDomains。其中域作为Key，类型为字典类型。</span><br><span class="line"></span><br><span class="line">&gt;<span class="strong">**4**</span>、每个域下面需要设置3个属性：NSIncludesSubdomains、		NSExceptionRequiresForwardSecrecy、		NSExceptionAllowsInsecureHTTPLoads。</span><br><span class="line"><span class="code">	均为Boolean类型，值分别为YES、NO、YES。</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="header">### 针对App Thinning</span></span><br><span class="line"></span><br><span class="line"><span class="header">### 添加Scheme白名单实现应用跳转（SSO等）</span></span><br><span class="line"><span class="bullet">- </span>问题描述：在iOS 9下涉及到平台客户端跳转，系统会自动到项目info.plist下检测是否设置平台Scheme。对于需要配置的平台，如果没有配置，就无法正常跳转平台客户端。因此要支持客户端的分享和授权等，需要配置Scheme名单。</span><br><span class="line"><span class="bullet">- </span>解决方案：</span><br><span class="line"></span><br><span class="line">具体方法：</span><br><span class="line">&gt;1、在项目的info.plist中添加一LSApplicationQueriesSchemes，类型为Array。</span><br><span class="line"></span><br><span class="line">&gt;2、然后给它添加一个需要支持的项目，类型为字符串类型</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="header">### 注意</span></span><br><span class="line"><span class="bullet">- </span>由于苹果审核政策需求，需要对未安装客户端平台进行隐藏，在设置QQ、微信AppID之后调用下面的方法，</span><br></pre></td></tr></table></figure></p>
<p>[UMSocialConfig hiddenNotInstallPlatforms:@[UMShareToQQ, UMShareToQzone, UMShareToWechatSession, UMShareToWechatTimeline]];</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"> - but  这个接口只对默认分享面板平台有隐藏功能，自定义分享面板或登录按钮需要自己处理</span><br><span class="line"> </span><br><span class="line"><span class="bullet">- </span>对于自定义分享面板处理：</span><br><span class="line"><span class="code">	- UmengSDK已经嵌入相关API，直接用就好</span></span><br><span class="line"></span><br><span class="line"><span class="header">### 只要按照官方文档来，基本上就能马到成功（）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="header">##MarkDown 的 CSS 实现配置 - 杨志平</span></span><br><span class="line"></span><br><span class="line"><span class="header">####题目灵感来源</span></span><br><span class="line"><span class="blockquote">&gt; 起源于我们现有的博客引擎主题交互很不错，但是排版烂的要死 ，我水平有限这里只是浅显介绍实现修改我们的markdown编译器的一些排版样式</span></span><br><span class="line"></span><br><span class="line"><span class="header">#### 研究方向</span></span><br><span class="line"><span class="blockquote">&gt; 自定义一个非标准化，有其他多元素的MarkDown解析器 如下几点:</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-  </span>可选框</span><br><span class="line"> <span class="code">`- [ ] `</span></span><br><span class="line"><span class="bullet">- </span>本地图片索引，可控制对齐及大小 </span><br><span class="line"><span class="code">`![Alt text](http://path/to/img.jpg "optional title" 100x200)`</span></span><br><span class="line"><span class="code">`![Alt text](./1449756974449.png)`</span></span><br><span class="line"><span class="bullet">- </span>标签功能</span><br><span class="line"><span class="code">`@(Share)[css, Markdown]`</span></span><br><span class="line"><span class="bullet">- </span>代码高亮（不同语言）</span><br><span class="line"></span><br><span class="line"><span class="code">`swift`</span></span><br><span class="line"></span><br><span class="line"><span class="code">```</span> swift</span><br><span class="line"><span class="code">    private var majorModel = PickMajorModel()</span></span><br><span class="line"><span class="code">    private var subjectModel = OFFKeyNameModel()</span></span><br><span class="line"><span class="code">    required init?(coder aDecoder: NSCoder) &#123;</span></span><br><span class="line"><span class="code">        super.init(coder: aDecoder)</span></span><br><span class="line"><span class="code">    &#125;</span></span><br></pre></td></tr></table></figure>
<p><code>objectivec</code></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIScrollView</span> *scrollView = [[<span class="built_in">UIScrollView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, kScreenW, kScreenH)];</span><br><span class="line">scrollView<span class="variable">.showsVerticalScrollIndicator</span> = <span class="literal">NO</span>;</span><br><span class="line">[scrollView addSubview:<span class="keyword">self</span><span class="variable">.downMainView</span>];</span><br></pre></td></tr></table></figure>
<p><strong>有一种惨不忍睹的即视感</strong><br><img src="./1449756974449.png" alt="Alt text"></p>
<h3 id="MarkDown来源及实现">MarkDown来源及实现</h3><blockquote>
<p>Markdown is a plain text format for writing structured documents, based on conventions used for indicating formatting in email and usenet posts. It was developed in 2004 by John Gruber, who wrote the first markdown-to-html converter in Perl, and it soon became widely used in websites. By 2014 there were dozens of implementations in many languages.</p>
</blockquote>
<p><code>见知乎上回答</code><br><a href="http://www.zhihu.com/question/28756456" target="_blank" rel="external">实现一个markdown解析器需要具备那些知识</a></p>
<h3 id="如何简单的改善文字编排的效果">如何简单的改善文字编排的效果</h3><h5 id="更换博客主题（简单粗暴）">更换博客主题（简单粗暴）</h5><blockquote>
<p>我们使用的博客引擎Hexo来举例，列举下面三个主题</p>
<ul>
<li>landscape</li>
<li>hexo-theme-vno-master</li>
<li>hexo-theme-yilia-master</li>
</ul>
</blockquote>
<h5 id="更换MarkDown编译器的主题">更换MarkDown编译器的主题</h5><blockquote>
<p>以 <strong><em>Mou</em></strong> 举例子，它提供了多套markdown语法下的排版样式<br>手动新创建一个CSS文本布局配置 <strong><em>Blog</em></strong><br><img src="./1449768288128.png" alt="Alt text"></p>
</blockquote>
<h4 id="CSS配置文件修改">CSS配置文件修改</h4><p>详细配置参数如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">html</span> <span class="rules">&#123; <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">62.5%</span></span></span>; &#125;</span></span><br><span class="line"><span class="tag">html</span>, <span class="tag">body</span> <span class="rules">&#123; <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100%</span></span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">body</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-family</span>:<span class="value"> Helvetica, Arial, sans-serif</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">150%</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">line-height</span>:<span class="value"> <span class="number">1.3</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#f6e6cc</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">700px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">margin</span>:<span class="value"> auto</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#27221a</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">0</span> <span class="number">30px</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>多级标题配置</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">h1</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">28px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">color</span>:<span class="value"> black</span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">h2</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">24px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">border-bottom</span>:<span class="value"> <span class="number">1px</span> solid <span class="hexcolor">#cccccc</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">color</span>:<span class="value"> black</span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">h3</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">18px</span></span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">h4</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">16px</span></span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">h5</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">14px</span></span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">h6</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#777777</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">14px</span></span></span>; &#125;</span></span><br></pre></td></tr></table></figure>
<p>表格</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">table</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">0</span></span></span>;<span class="rule"><span class="attribute">border-collapse</span>:<span class="value"> collapse</span></span>; &#125;</span></span><br><span class="line">  <span class="tag">table</span> <span class="tag">tr</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">border-top</span>:<span class="value"> <span class="number">1px</span> solid <span class="hexcolor">#cccccc</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background-color</span>:<span class="value"> white</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">0</span></span></span>; &#125;</span></span><br><span class="line">    <span class="tag">table</span> <span class="rule"><span class="attribute">tr</span>:<span class="value"><span class="function">nth-child</span>(<span class="number">2</span>n) &#123;</span><br><span class="line">      background-color: <span class="hexcolor">#f8f8f8</span></span></span>; &#125;</span><br><span class="line">    <span class="tag">table</span> <span class="tag">tr</span> <span class="tag">th</span> <span class="rules">&#123;</span><br><span class="line">      <span class="rule"><span class="attribute">font-weight</span>:<span class="value"> bold</span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1px</span> solid <span class="hexcolor">#cccccc</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">6px</span> <span class="number">13px</span></span></span>; &#125;</span></span><br><span class="line">    <span class="tag">table</span> <span class="tag">tr</span> <span class="tag">td</span> <span class="rules">&#123;</span><br><span class="line">      <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1px</span> solid <span class="hexcolor">#cccccc</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">6px</span> <span class="number">13px</span></span></span>; &#125;</span></span><br><span class="line">    <span class="tag">table</span> <span class="tag">tr</span> <span class="rule"><span class="attribute">th </span>:<span class="value">first-child, table tr td :first-child &#123;</span><br><span class="line">      margin-top: <span class="number">0</span></span></span>; &#125;</span><br><span class="line">    <span class="tag">table</span> <span class="tag">tr</span> <span class="rule"><span class="attribute">th </span>:<span class="value">last-child, table tr td :last-child &#123;</span><br><span class="line">      margin-bottom: <span class="number">0</span></span></span>; &#125;</span><br></pre></td></tr></table></figure>
<p>代码高亮</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">code</span>, <span class="tag">tt</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> <span class="number">2px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">0</span> <span class="number">5px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">white-space</span>:<span class="value"> nowrap</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1px</span> solid <span class="hexcolor">#eaeaea</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#f8f8f8</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">3px</span></span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">pre</span> <span class="tag">code</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">white-space</span>:<span class="value"> pre</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">border</span>:<span class="value"> none</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background</span>:<span class="value"> transparent</span></span>; &#125;</span></span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-周精益分享-后端开发" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/25/周精益分享-后端开发/" class="article-date">
  	<time datetime="2015-11-25T10:30:00.000Z" itemprop="datePublished">2015-11-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/25/周精益分享-后端开发/">周精益分享 - 后端开发</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Swift学习之二_-_张超耀">Swift学习之二 - 张超耀</h2><h3 id="深度理解”?”_&amp;&amp;_“!”">深度理解”?” &amp;&amp; “!”</h3> <figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Optional</span>其实是个<span class="keyword">enum</span>，里面有<span class="type">None</span>和Some两种类型。 nil就是<span class="type">Optional</span>.<span class="type">None</span>, 非nil就是<span class="type">Optional</span>.Some, 然后会通过Some(T)包装（wrap）原始值，这也是为什么在使用<span class="type">Optional</span>的时候要拆包（从<span class="keyword">enum</span>里取出来原始值）的原因。声明为<span class="type">Optional</span>只需要在类型后面紧跟一个<span class="string">"?"</span>即可</span><br></pre></td></tr></table></figure>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable"><span class="keyword">var</span> strValue</span>: String?  <span class="comment">//?相当于下面这种写法的语法糖</span></span><br><span class="line"><span class="variable"><span class="keyword">var</span> strValue1</span>: Optional<span class="type">&lt;Int&gt;</span></span><br></pre></td></tr></table></figure>
<p> 一旦声明为Optional的，如果不显式的赋值就会有个默认值nil。判断一个Optional的值是否有值，可以用if来判断：</p>
<figure class="highlight cal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (strValue != nil) &#123;</span><br><span class="line">    //<span class="keyword">do</span> sth <span class="keyword">with</span> strValue</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>怎么使用Optional值呢？<br>在使用Optional值的时候只前面需要加上一个”?”，就是这么简单。 </p>
<ul>
<li>这个”？”什么意思？：<br> 1、  询问是否响应后面这个方法，如果是nil值，也就是Optional.None，就不响应后面的方法，直接跳过，<br> 2、 如果有值，就是Optional.Some，可能就会拆包(unwrap)，然后对拆包后的值执行后面的操作，比如</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> <span class="built_in">hash</span>Value = strValue?.hashValue</span><br></pre></td></tr></table></figure>
<ul>
<li><p>strValue是Optional的字符串，如果strValue是nil，则hashValue也为nil，如果strValue不为nil，hashValue就是strValue字符串的值</p>
</li>
<li><p>到这里我们看到了?的两种使用场景:</p>
<pre><code><span class="number">1.</span>声明<span class="type">Optional</span>值变量
<span class="number">2.</span>用在对<span class="type">Optional</span>值操作中，用来判断是否能响应后面的操作
</code></pre></li>
<li>对于Optional值，不能直接进行操作，否则会报错</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> <span class="built_in">hash</span>Value1 = strValue!.hashValue</span><br></pre></td></tr></table></figure>
<p> 上面错误提示需要拆包(unwrap)后才能得到值，然后才能对其操作，那怎么来拆包呢？拆包提到了几种方法，一种是Optional Binding</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">str =</span> strValue &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">hashValue =</span> str.hashValue</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>还有一种是在具体的操作前添加”!”符号。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> <span class="built_in">hash</span>Value2 = strValue!.hashValue</span><br></pre></td></tr></table></figure>
<p> 这里的”!”表示<strong>我确定肯定这里的的strValue一定是非nil的，随便用吧，木事de</strong> 就像下面：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (strValue != nil) &#123;</span><br><span class="line">    <span class="built_in">let</span> <span class="built_in">hash</span>Value = strValue!.hashValue</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&#123;&#125;</span>里的strValue一定是非<span class="keyword">nil</span>的，所以就能直接加上!，强制拆包(unwrap)并执行后面的操作。</span><br><span class="line">当然如果不加判断，strValue不小心为<span class="keyword">nil</span>的话，就会出错，crash掉。</span><br></pre></td></tr></table></figure>
<p><strong><em> 51offer例子解释『隐式拆包的Optional』</em></strong></p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这种是特殊的<span class="type">Optional</span>，称为Implicitly Unwrapped Optionals, 直译就是隐式拆包的<span class="type">Optional</span>，就等于说你每次对这种类型的值操作时，都会自动在操作前补上一个<span class="comment">!进行拆包，然后在执行后面的操作，当然如果该值是nil，也一样会报错crash掉。</span></span><br></pre></td></tr></table></figure>
<ul>
<li>“!”也有两种使用场景<pre><code><span class="number">1</span>、强制对<span class="type">Optional</span>值进行拆包(unwrap)
<span class="number">2</span>、声明Implicitly Unwrapped Optionals值，一般用于类中的属性
</code></pre></li>
</ul>
<h3 id="swift_断言">swift 断言</h3><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">断言（Assertions）</span><br><span class="line">Optionals可以让我们检测值是否存在。在某些情况下，如果某个值不存在或者没有提供特定的满足条件，代码不应该继续往下执行。</span><br><span class="line">在这些情况下，可以使用触发断言来终止执行并提供调试。</span><br><span class="line">断言是在运行时检测条件是否为<span class="literal">true</span>,如果为<span class="literal">true</span>,就继续往下执行，否则就在这里中断。</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">var</span> jobs = <span class="string">"我是一个好人"</span></span><br><span class="line"><span class="function"><span class="title">assert</span><span class="params">(jobs == <span class="string">"我是一个好人"</span>, <span class="string">"我是一个好人"</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">assert</span><span class="params">(jobs == <span class="string">"我是一个坏人"</span>, <span class="string">"我是一个坏人么？"</span>)</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">什么时候使用断言呢？</span><br><span class="line">包含下面的情况时使用断言：</span><br><span class="line">        <span class="number">1</span>、整型下标索引作为值传给自定义索引实现的参数时，但下标索引值不能太低也不能太高时，使用断言</span><br><span class="line">      **<span class="number">2</span>、传值给函数但如果这个传过来的值无效时，函数就不能完成功能时，使用断言。</span><br><span class="line">        <span class="number">3</span>、Optional值当前为<span class="keyword">nil</span>，但是后面的代码成功执行的条件是要求这个值不能为<span class="keyword">nil</span>，使用断言</span><br></pre></td></tr></table></figure>
<h2 id="IM中输入框的优化方案实现">IM中输入框的优化方案实现</h2><p><code>以下图的输入框为例</code></p>
<p><img src="https://cloud.githubusercontent.com/assets/9360037/11319390/0ad964a8-90b0-11e5-90aa-9d2ca1fa548e.png" alt="stand"></p>
<h4 id="输入框的呈现方式选择">输入框的呈现方式选择</h4><p><code>以下两个方法对比</code></p>
<ul>
<li>Keyboard的inputAccessoryView</li>
</ul>
<blockquote>
<p>相对推荐的方法，有更好的丰富的交互效果</p>
<p>可以与scrollView的一些属性直接绑定</p>
</blockquote>
<ul>
<li>InputView的frame适应</li>
</ul>
<blockquote>
<p>传统的方法</p>
<p>优点：灵活控制显示位置</p>
<p>缺点：过多的计算frame</p>
</blockquote>
<h3 id="InputAccessoryView方式">InputAccessoryView方式</h3><p><a href="https://github.com/ZhipingYang/UUKeyboardInputView" target="_blank" rel="external">案例见GitHub的Demo</a></p>
<blockquote>
<p>iOS的输入源都有输入源（keyboard及keyboard的配件InputAccessoryView），那通常的方法是输入源控件（Textfield、TextView等）使用一般的<code>InputView的frame适应</code></p>
</blockquote>
<p><strong>解释几个技巧点</strong></p>
<ul>
<li>InputView（ 输入源 ）的父视图作为该InputView的InputAccessoryView，要避免相互引用</li>
<li>巧用第三方不可见的InputView在适当时间点转移第一响应者给可见的InputView</li>
<li>完成编辑时去除第一响应者（注意iOS9下键盘响应逻辑视图层级都发生了变化）</li>
</ul>
<p><strong>主要代码</strong></p>
<p><img src="https://cloud.githubusercontent.com/assets/9360037/11436829/4b2d95f2-9523-11e5-8d66-8745354c0e99.png" alt="simulator screen shot nov 27 2015 4 17 38 pm"></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单例初始化</span></span><br><span class="line">+ (U<span class="built_in">UInputAccessoryView</span>*)sharedView &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> once;</span><br><span class="line">    <span class="keyword">static</span> U<span class="built_in">UInputAccessoryView</span> *sharedView;</span><br><span class="line">    <span class="built_in">dispatch_once</span>(&amp;once, ^ &#123;</span><br><span class="line">        sharedView = [[U<span class="built_in">UInputAccessoryView</span> alloc] init];</span><br><span class="line">        sharedView-&gt;btnBack = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span>];</span><br><span class="line">        sharedView-&gt;btnBack<span class="variable">.frame</span> = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, U<span class="built_in">UIAV_MAIN_W</span>, U<span class="built_in">UIAV_MAIN_H</span>);</span><br><span class="line">        [sharedView-&gt;btnBack addTarget:sharedView action:<span class="keyword">@selector</span>(dismiss) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">        sharedView-&gt;btnBack<span class="variable">.backgroundColor</span>=[<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">        <span class="built_in">UIToolbar</span> *toolbar = [[<span class="built_in">UIToolbar</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, U<span class="built_in">UIAV_MAIN_W</span>, <span class="number">44</span>)];</span><br><span class="line">        sharedView-&gt;inputView = [[<span class="built_in">UITextField</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(U<span class="built_in">UIAV_Edge_Hori</span>, U<span class="built_in">UIAV_Edge_Vert</span>, U<span class="built_in">UIAV_MAIN_W</span>-U<span class="built_in">UIAV_Btn_W</span>-<span class="number">4</span>*U<span class="built_in">UIAV_Edge_Hori</span>, U<span class="built_in">UIAV_Btn_H</span>)];</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.borderStyle</span> = <span class="built_in">UITextBorderStyleRoundedRect</span>;</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.returnKeyType</span> = <span class="built_in">UIReturnKeyDone</span>;</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.clearButtonMode</span> = <span class="built_in">UITextFieldViewModeWhileEditing</span>;</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.enablesReturnKeyAutomatically</span> = <span class="literal">YES</span>;</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.delegate</span> = sharedView;</span><br><span class="line">        [toolbar addSubview:sharedView-&gt;inputView];</span><br><span class="line">        sharedView-&gt;assistView = [[<span class="built_in">UITextField</span> alloc]init];</span><br><span class="line">        sharedView-&gt;assistView<span class="variable">.delegate</span> = sharedView;</span><br><span class="line">        sharedView-&gt;assistView<span class="variable">.returnKeyType</span> = <span class="built_in">UIReturnKeyDone</span>;</span><br><span class="line">        sharedView-&gt;assistView<span class="variable">.enablesReturnKeyAutomatically</span> = <span class="literal">YES</span>;</span><br><span class="line">        [sharedView-&gt;btnBack addSubview:sharedView-&gt;assistView];</span><br><span class="line">        sharedView-&gt;assistView<span class="variable">.inputAccessoryView</span> = toolbar;</span><br><span class="line">        sharedView-&gt;BtnSave = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span>];</span><br><span class="line">        sharedView-&gt;BtnSave<span class="variable">.frame</span> = <span class="built_in">CGRectMake</span>(U<span class="built_in">UIAV_MAIN_W</span>-U<span class="built_in">UIAV_Btn_W</span>-<span class="number">2</span>*U<span class="built_in">UIAV_Edge_Hori</span>, U<span class="built_in">UIAV_Edge_Vert</span>, U<span class="built_in">UIAV_Btn_W</span>, U<span class="built_in">UIAV_Btn_H</span>);</span><br><span class="line">        sharedView-&gt;BtnSave<span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">        [sharedView-&gt;BtnSave setTitle:<span class="string">@"确定"</span> forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">        [sharedView-&gt;BtnSave setTitleColor:[<span class="built_in">UIColor</span> redColor] forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">        [sharedView-&gt;BtnSave addTarget:sharedView action:<span class="keyword">@selector</span>(Done) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">        [toolbar addSubview:sharedView-&gt;BtnSave];</span><br><span class="line">    &#125;);</span><br><span class="line">	<span class="built_in">CGRectGetHeight</span>([<span class="built_in">UIScreen</span> mainScreen]<span class="variable">.bounds</span>);</span><br><span class="line">	<span class="keyword">return</span> sharedView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>实现逻辑代码</code></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="keyword">void</span>)showKeyboardType:(<span class="built_in">UIKeyboardType</span>)type content:(<span class="built_in">NSString</span> *)content Block:(U<span class="built_in">UInputAccessoryBlock</span>)block</span><br><span class="line">&#123;</span><br><span class="line">    [[U<span class="built_in">UInputAccessoryView</span> sharedView] show:block</span><br><span class="line">                               keyboardType:type</span><br><span class="line">                                    content:content];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)show:(U<span class="built_in">UInputAccessoryBlock</span>)block keyboardType:(<span class="built_in">UIKeyboardType</span>)type content:(<span class="built_in">NSString</span> *)content</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UIWindow</span> *window=[<span class="built_in">UIApplication</span> sharedApplication]<span class="variable">.keyWindow</span>;</span><br><span class="line">    [window addSubview:btnBack];</span><br><span class="line"></span><br><span class="line">    inputBlock = block;</span><br><span class="line">    inputView<span class="variable">.text</span> = content;</span><br><span class="line">    inputView<span class="variable">.keyboardType</span> = type;</span><br><span class="line">    assistView<span class="variable">.keyboardType</span> = type;</span><br><span class="line">    [assistView becomeFirstResponder];</span><br><span class="line">    shouldDismiss = <span class="literal">NO</span>;</span><br><span class="line">    </span><br><span class="line">    [[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserverForName:<span class="built_in">UIKeyboardDidShowNotification</span></span><br><span class="line">                                                      object:<span class="literal">nil</span></span><br><span class="line">                                                       queue:<span class="literal">nil</span></span><br><span class="line">                                                  usingBlock:^(<span class="built_in">NSNotification</span> * _Nonnull note) &#123;</span><br><span class="line">                                                      <span class="keyword">if</span> (!shouldDismiss) &#123;</span><br><span class="line">                                                          [inputView becomeFirstResponder];</span><br><span class="line">                                                      &#125;</span><br><span class="line">                                                  &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)Done</span><br><span class="line">&#123;</span><br><span class="line">    [inputView resignFirstResponder];</span><br><span class="line">    !inputBlock ?: inputBlock(inputView<span class="variable">.text</span>);</span><br><span class="line">    [<span class="keyword">self</span> dismiss];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)textFieldShouldReturn:(<span class="built_in">UITextField</span> *)textField</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">self</span> Done];</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)dismiss</span><br><span class="line">&#123;</span><br><span class="line">    shouldDismiss = <span class="literal">YES</span>;</span><br><span class="line">    [inputView resignFirstResponder];</span><br><span class="line">    [btnBack removeFromSuperview];</span><br><span class="line">    [[<span class="built_in">NSNotificationCenter</span> defaultCenter] removeObserver:<span class="keyword">self</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="InputView的frame适应">InputView的frame适应</h3><p><a href="https://github.com/ZhipingYang/UUChatSwift/blob/master/UUChatTableViewSwift/ChatTableViewController.swift#L123" target="_blank" rel="external">案例见GitHub的Demo</a></p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 键盘响应布局</span></span><br><span class="line">@objc func keyboardFrameChanged<span class="params">(notification: NSNotification)</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">let</span> dict = NSDictionary<span class="params">(dictionary: notification.userInfo!)</span></span><br><span class="line">    <span class="built_in">let</span> keyboardValue = dict.objectForKey<span class="params">(UIKeyboardFrameEndUserInfoKey)</span> as<span class="built_in">!</span> NSValue</span><br><span class="line">    <span class="built_in">let</span> bottomDistance = mainScreenSize<span class="params">()</span>.height - keyboardValue.CGRectValue<span class="params">()</span>.origin.y</span><br><span class="line">    <span class="built_in">let</span> duration = Double<span class="params">(dict.objectForKey<span class="params">(UIKeyboardAnimationDurationUserInfoKey)</span> as! NSNumber)</span></span><br><span class="line">    </span><br><span class="line">    UIView.animateWithDuration<span class="params">(duration, animations: &#123;</span><br><span class="line">        self.inputViewConstraint!.constant = -bottomDistance</span><br><span class="line">        self.view.layoutIfNeeded<span class="params">()</span></span><br><span class="line">        &#125;, completion: &#123;</span><br><span class="line">            <span class="params">(value: Bool)</span> in</span><br><span class="line">            self.chatTableView.scrollToBottom<span class="params">(animation: <span class="literal">true</span>)</span></span><br><span class="line">    &#125;)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ScrollView下拉动态修改keyboard（InputView）的frame">ScrollView下拉动态修改keyboard（InputView）的frame</h3><p><strong>常见隐藏keyboard的一些方式</strong></p>
<ul>
<li>TouchBeigin</li>
<li>DidDrag</li>
<li>EndDrag</li>
<li>Interactive</li>
</ul>
<p><strong>iOS7 开始，ScrollView提供</strong></p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@available</span>(iOS <span class="number">7.0</span>, *)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> UIScrollViewKeyboardDismissMode : Int &#123;</span><br><span class="line">    <span class="keyword">case</span> None</span><br><span class="line">    <span class="keyword">case</span> OnDrag <span class="comment">// dismisses the keyboard when a drag begins</span></span><br><span class="line">    <span class="keyword">case</span> Interactive <span class="comment">// the keyboard follows the dragging touch off screen, and may be pulled upward again to cancel the dismiss</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所以在ScrollView上添加<code>scrollView.keyboardDismissMode = UIScrollViewKeyboardDismissMode.Interactive</code>就可以了。<br>效果详见iOS7及以上原生设备的短信滑动消失键盘的交互</p>
<h2 id="写负责任的代码之异常处理_-_曾铭">写负责任的代码之异常处理 - 曾铭</h2><blockquote>
<p>千万不要以为你可以忽视这个特殊的返回值，因为它是一种“可能性”。代码漏掉任何一种可能出现的情况，都可能产生意想不到的灾难性结果。</p>
</blockquote>
<ul>
<li>重视代码（及业务）逻辑的异常情况，将其视为『正常流程』的一部分。</li>
</ul>
<ul>
<li>重视函数的抛出异常，将其视为返回值之一（union类型）。</li>
</ul>
<h3 id="政策之后的对策">政策之后的对策</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">foo</span><span class="params">()</span> <span class="keyword">throws</span> MyException </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>catch 全部异常</li>
</ul>
<ul>
<li>try 全部代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">  ... foo() ...</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="我们_API_为什么难调试">我们 API 为什么难调试</h4><ul>
<li>Service 层未声明抛出异常，也会抛出异常</li>
<li>抛出的异常 API 层记入日志，向上抛时却丢弃了异常信息</li>
<li>API 层方法代码全部 try，很难定位到是哪一行出问题</li>
</ul>
<h3 id="推荐的对策">推荐的对策</h3><ul>
<li>只 catch 指定的 exception</li>
<li>try 进可能的小</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  foo();</span><br><span class="line">&#125; <span class="keyword">catch</span> (MyException e) &#123;</span><br><span class="line">  Log.warning(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>源头思考全部可能性，内部的问题不抛给别人</li>
<li>不要试图忽略（隐藏）错误，每次出错都是优化代码（反思自己局限）的好机会。否则，你终将付出代价。</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-周精益分享-Swift入门专题" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/13/周精益分享-Swift入门专题/" class="article-date">
  	<time datetime="2015-11-13T10:30:00.000Z" itemprop="datePublished">2015-11-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/13/周精益分享-Swift入门专题/">周精益分享 - Swift入门专题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Swift初见_—_张超耀">Swift初见 — 张超耀</h2><h3 id="宏">宏</h3><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// in objective-c, but in swift, #define can't be used any more  </span></span><br><span class="line"><span class="comment">// use let keyword to define a macro, look up original document:  </span></span><br><span class="line">/*  </span><br><span class="line">Simple Macros  </span><br><span class="line">Where you typically used the #define directive <span class="keyword">to</span> define a primitive constant <span class="keyword">in</span> C <span class="keyword">and</span> Objective-C, <span class="keyword">in</span> Swift you <span class="keyword">use</span> a <span class="keyword">global</span> constant instead. For example, the constant definition #define FADE_ANIMATION_DURATION <span class="number">0.35</span> can be better expressed <span class="keyword">in</span> Swift <span class="keyword">with</span> <span class="keyword">let</span> FADE_ANIMATION_DURATION = <span class="number">0.35</span>. Because simple constant-like macros map directly <span class="keyword">to</span> Swift <span class="keyword">global</span> variables, the compiler automatically imports simple macros defined <span class="keyword">in</span> C <span class="keyword">and</span> Objective-C source files.  </span><br><span class="line">*/  </span><br><span class="line"><span class="comment">// in objective-c  </span></span><br><span class="line"><span class="comment">// #define kCommonAPI @"http://<span class="doctag"><span class="keyword">xxx</span></span><span class="doctag"><span class="keyword">xxx</span></span>x"  </span></span><br><span class="line"><span class="comment">// but in swift, no #define, just use let to define  </span></span><br><span class="line"><span class="keyword">let</span> kCommonAPI = <span class="string">"http://xxxxxxx"</span></span><br></pre></td></tr></table></figure>
<h3 id="注释_&amp;_分号">注释 &amp; 分号</h3><ul>
<li>在Swift中，注释跟C/OC语言中的注释很像，但最大的不同点就是在Swift中多行注释可以嵌套</li>
</ul>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 这是单行注释  </span><br><span class="line">  </span><br><span class="line">/<span class="keyword">*</span> 这也是注释，但是多行注释   </span><br><span class="line">  /<span class="keyword">*</span>多行注释在swift中是可以嵌套的<span class="keyword">*</span>/  </span><br><span class="line">  /<span class="keyword">*</span>原官方指导教程上说嵌套多行注释可以快速、简单地把大的代码块分成多块来注释 <span class="keyword">*</span>/  </span><br><span class="line"><span class="keyword">*</span>/</span><br></pre></td></tr></table></figure>
<ul>
<li>与其它开发语言不同的时，swift是不要求写分号的，当然如果想写，也是可以的。当你想把多个语句写到同一行时，这种情况下就一定要使用分号来隔开不同的语句了</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dog = <span class="string">"a gog"</span> <span class="comment">// 可以不添加分号  </span></span><br><span class="line"><span class="keyword">let</span> cat = <span class="string">"a cat"</span>; <span class="built_in">print</span>(cat)<span class="comment">// 除了最后一条语句可以不添加分号外，其它都需要添加分号来隔开  </span></span><br><span class="line"><span class="keyword">let</span> catTwo = <span class="string">"two cats"</span>; <span class="keyword">let</span> name = <span class="string">"Jobs"</span>; <span class="built_in">print</span>(<span class="string">"<span class="subst">\(name)</span> has <span class="subst">\(catTwos)</span>"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="类型转换">类型转换</h3><ul>
<li>Swift不会像C、OC那样自动<strong>隐式转换</strong>类型，所以我们需要手动进行类型转换 </li>
</ul>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> twoThousand: UInt16 = <span class="number">2000</span>   </span><br><span class="line"><span class="comment">// one是UInt8类型  </span></span><br><span class="line"><span class="built_in">let</span> one: UInt8 = <span class="number">1</span>  </span><br><span class="line"><span class="comment">// twoThousand是UInt16类型，one是UInt8类型，如果要执行相加，那么就需要进行类型转换   </span></span><br><span class="line"><span class="comment">// 否则会报错的。  </span></span><br><span class="line"><span class="built_in">let</span> twoThousandAndOne = twoThousand + UInt16<span class="params">(one)</span> </span><br><span class="line"></span><br><span class="line"><span class="built_in">*</span><span class="built_in">*</span> 浮点值转换成整型时，会截尾<span class="built_in">*</span><span class="built_in">*</span></span><br></pre></td></tr></table></figure>
<h3 id="类型别名(Typealias)">类型别名(Typealias)</h3><ul>
<li>类型别名也就是给已经存在的类型起一个别名。定义类型别名是使用关键字typealias。 类型别名一般是为了让开发者更容易看出变量或者常量的类型或者是更好地归类某一个模块中需要使用到的类型，让开发者见名知意。</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下面是给UInt16起一个别名，叫mySample  </span></span><br><span class="line"><span class="comment">// 然后就可以在其它地方使用这个mySample声明变量或者常量  </span></span><br><span class="line">typealias mySample = UInt16  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 由于前面已经定义了类型别名，那么这里使用AudioSample也相当于使用UInt16  </span></span><br><span class="line">所以mySample<span class="class">.min</span> = UInt16<span class="class">.min</span>,也就是<span class="number">0</span> </span><br><span class="line"><span class="tag">var</span> maxAmplitudeFound = mySample.min</span><br></pre></td></tr></table></figure>
<h3 id="“?”_和_“!”">“?” 和 “!”</h3><ul>
<li>Swift语言使用var定义变量，但和别的语言不同，Swift里不会自动给变量赋初始值， 也就是说变量不会有默认值，所以要求使用变量之前必须要对其初始化<br>。如果在使用变量之前不进行初始化就会报错.</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stringValue : <span class="type">String</span>?</span><br><span class="line">stringValue = <span class="literal">nil</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"<span class="subst">\(stringValue)</span>"</span>)</span><br><span class="line"><span class="keyword">let</span> hashValue = stringValue?.hashValue</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这就是optional, strValue自动得到默认值：nil</span></span><br><span class="line"><span class="comment">// 这个nil跟Objective-C中的nil不同，不是指针，而是表示值不存在。</span></span><br><span class="line"><span class="keyword">var</span> strValue: <span class="type">String</span>?</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断optional是否有值</span></span><br><span class="line"><span class="keyword">if</span> (strValue != <span class="literal">nil</span>) &#123;</span><br><span class="line">    <span class="comment">// do what you need to do here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="下期预告">下期预告</h2><h3 id="深度理解Swift的”?”和”!”">深度理解Swift的”?”和”!”</h3><h3 id="Swift之断言">Swift之断言</h3><h3 id="浅谈Swift的closure">浅谈Swift的closure</h3><h2 id="Dubbo_上手_—_陈奎">Dubbo 上手 — 陈奎</h2><h2 id="『图像和滤镜』_-_图像选择器">『图像和滤镜』 - 图像选择器</h2><p><code>我们可以使用以下常规的图像获取方式</code></p>
<p><img src="./Simulator Screen Shot Nov 12, 2015, 8.11.12 PM.png" alt="Alt text"></p>
<p><code>图库与相册</code></p>
<p><img src="./Simulator Screen Shot Nov 12, 2015, 8.16.30 PM.png" alt="Alt text"></p>
<h4 id="系统自带">系统自带</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">touchesBegan</span><span class="params">(touches: Set&lt;UITouch&gt;, withEvent event: UIEvent?)</span></span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> sheet = <span class="type">UIAlertController</span>(title: <span class="string">"图片选择"</span>, message: <span class="string">"简单版的三种选择"</span>, preferredStyle: .<span class="type">ActionSheet</span>)</span><br><span class="line">    <span class="comment">// 判断设备是否支持相机（iPod &amp; Simulator）</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="type">UIImagePickerController</span>.isSourceTypeAvailable(.<span class="type">Camera</span>)) &#123;</span><br><span class="line">        sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"Camera"</span>, style: .<span class="type">Default</span>, handler: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>.showPhotoes(.<span class="type">Camera</span>)</span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;</span><br><span class="line">    sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"PhotoLibrary"</span>, style: .<span class="type">Default</span>, handler: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>.showPhotoes(.<span class="type">PhotoLibrary</span>)</span><br><span class="line">    &#125;))</span><br><span class="line">    sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"SavedPhotosAlbum"</span>, style: .<span class="type">Default</span>, handler: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>.showPhotoes(.<span class="type">SavedPhotosAlbum</span>)</span><br><span class="line">    &#125;))</span><br><span class="line">    sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"Cancel"</span>, style: .<span class="type">Cancel</span>, handler: <span class="literal">nil</span>))</span><br><span class="line">    presentViewController(sheet, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">showPhotoes</span><span class="params">(source: UIImagePickerControllerSourceType)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> controller = <span class="type">UIImagePickerController</span>()</span><br><span class="line">    controller.delegate = <span class="keyword">self</span></span><br><span class="line">    controller.sourceType = source</span><br><span class="line">    controller.allowsEditing = source == .<span class="type">SavedPhotosAlbum</span> ? <span class="literal">true</span>:<span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">self</span>.presentViewController(controller, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>UIImagePickerController的代理</code><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">imagePickerControllerDidCancel</span><span class="params">(picker: UIImagePickerController)</span></span> &#123;</span><br><span class="line">    dismissViewControllerAnimated(<span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 非常坑，这个方法废弃了但代码提示只有它</span></span><br><span class="line"><span class="comment">//	func imagePickerController(picker: UIImagePickerController, didFinishPickingImage image: UIImage, editingInfo: [String : AnyObject]?) &#123;</span></span><br><span class="line"><span class="comment">//	&#125;</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">imagePickerController</span><span class="params">(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject])</span></span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="info字典介绍"><a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImagePickerControllerDelegate_Protocol/#//apple_ref/doc/constant_group/Editing_Information_Keys" target="_blank" rel="external">info字典介绍</a></h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIImagePickerControllerMediaType</span>: String</span><br><span class="line"><span class="built_in">UIImagePickerControllerOriginalImage</span>: <span class="built_in">UIImage</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerEditedImage</span>: <span class="built_in">UIImage</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerCropRect</span>: <span class="built_in">NSValue</span> -&gt; <span class="built_in">CGRect</span></span><br><span class="line"><span class="comment">// MediaURL只为视频提供</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerMediaURL</span>:  <span class="built_in">NSURL</span></span><br><span class="line"><span class="comment">// LivePhoto是一张图片，保留那个moment的前后动作和声音</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerLivePhoto</span>: String</span><br><span class="line"><span class="comment">// 摄像摄影时返回media的信息字典</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerMediaMetadata</span>: <span class="built_in">NSDictionary</span></span><br></pre></td></tr></table></figure>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SavedPhotosAlbum 的 info 示例</span></span><br><span class="line"></span><br><span class="line">▿ 5 elements</span><br><span class="line">  ▿ [0] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerCropRect"</span></span><br><span class="line"></span>  ▿ [1] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerOriginalImage"</span></span><br><span class="line"></span>  ▿ [2] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerReferenceURL"</span></span><br><span class="line"></span>    -<span class="ruby"> .<span class="number">1</span> <span class="symbol">:</span> assets-<span class="symbol">library:</span>/<span class="regexp">/asset/asset</span>.<span class="constant">JPG</span>?id=<span class="number">99</span>D53A1F-<span class="constant">FEEF</span>-<span class="number">40</span>E1-<span class="number">8</span>BB3-<span class="number">7</span>DD55A43C8B7&amp;ext=<span class="constant">JPG</span></span><br><span class="line"></span>  ▿ [3] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerMediaType"</span></span><br><span class="line"></span>    -<span class="ruby"> .<span class="number">1</span> <span class="symbol">:</span> public.image</span><br><span class="line"></span>  ▿ [4] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerEditedImage"</span></span></span><br></pre></td></tr></table></figure>
<h3 id="自定义">自定义</h3><p><img src="./1447343597718.png" alt="Alt text"></p>
<p>遍历相册的所有图片<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AssetsLibrary.framework</span></span><br><span class="line"><span class="comment">// ALAssetsLibrary 的使用,但是它慢慢的被放弃了</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">loadLocalPhotoes</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">var</span> countOne = <span class="number">0</span></span><br><span class="line">        <span class="comment">//ALAssetsGroupSavedPhotos表示只读取相机胶卷（ALAssetsGroupAll则读取全部相簿）</span></span><br><span class="line">        assetsLibrary.enumerateGroupsWithTypes(<span class="type">ALAssetsGroupSavedPhotos</span>, usingBlock: &#123;</span><br><span class="line">            (group: <span class="type">ALAssetsGroup</span>!, stop) <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"is goin"</span>)</span><br><span class="line">            <span class="keyword">if</span> group != <span class="literal">nil</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> assetBlock : <span class="type">ALAssetsGroupEnumerationResultsBlock</span> = &#123;</span><br><span class="line">                    (result: <span class="type">ALAsset</span>!, index: <span class="type">Int</span>, stop) <span class="keyword">in</span></span><br><span class="line">                    <span class="keyword">if</span> result != <span class="literal">nil</span> &#123;</span><br><span class="line">                        <span class="keyword">self</span>.assets.append(result)</span><br><span class="line">                        countOne++</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                group.enumerateAssetsUsingBlock(assetBlock)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"assets:<span class="subst">\(countOne)</span>"</span>)</span><br><span class="line">                <span class="keyword">self</span>.startChangeLocalImages(<span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;, failureBlock: &#123; (fail) <span class="keyword">in</span></span><br><span class="line">                <span class="built_in">print</span>(fail)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 展现本地图片</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">startChangeLocalImages</span><span class="params">(<span class="keyword">var</span> index: Int)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> index==assets.<span class="built_in">count</span> &#123;</span><br><span class="line">            index = <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> myAsset = assets[index]</span><br><span class="line">        <span class="keyword">let</span> image = <span class="type">UIImage</span>(<span class="type">CGImage</span>:myAsset.thumbnail().takeUnretainedValue())</span><br><span class="line">        <span class="keyword">self</span>.backImageView.image = image</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> popTime = dispatch_time(<span class="type">DISPATCH_TIME_NOW</span>, <span class="type">Int64</span>(<span class="number">1</span> * <span class="type">Double</span>(<span class="type">NSEC_PER_SEC</span>)))</span><br><span class="line">        dispatch_after(popTime, dispatch_get_main_queue()) &#123;</span><br><span class="line">            <span class="keyword">self</span>.startChangeLocalImages(index+<span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>iOS9 开始使用新库<br><a href="https://developer.apple.com/library/prerelease/ios/documentation/Photos/Reference/PHPhotoLibrary_Class/index.html" target="_blank" rel="external">PHPhotoLibrary</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-周精益分享-英语" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/23/周精益分享-英语/" class="article-date">
  	<time datetime="2015-10-23T10:30:00.000Z" itemprop="datePublished">2015-10-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/23/周精益分享-英语/">周精益分享 - 英语</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="参与开源提高英语读写_-_王胜">参与开源提高英语读写 - 王胜</h2><h3 id="阅读能力">阅读能力</h3><ul>
<li>泡开源论坛，查看讨论</li>
<li>阅读源代码包括注解、代码提交说明</li>
</ul>
<blockquote>
<p>前期泡论坛，看注解、提交说明时需耐下性子，借助翻译工具。时间长了，久而久之，词汇量就上升了。</p>
</blockquote>
<h3 id="书写能力">书写能力</h3><ul>
<li>试图修复bug或者提交建议</li>
<li>尝试翻译开源软件的使用手册</li>
</ul>
<blockquote>
<p>经历了阅读阶段的词汇量的积累，可以再通过书写来巩固词汇量的运用。此阶段要拥有儿童学语言的勇气，不要担心自己写错，被其他参与开源的人看到笑话。</p>
</blockquote>
<h2 id="MOOC_上手_-_曾铭">MOOC 上手 - 曾铭</h2><h3 id="Massive_Open_Online_Courses_大型开放式网络课程">Massive Open Online Courses 大型开放式网络课程</h3><ul>
<li>Coursera</li>
<li>Udacity</li>
<li>edX</li>
<li>中国大学MOOC</li>
</ul>
<h3 id="上手感受">上手感受</h3><ul>
<li>视频教程 vs 正规课程</li>
<li>视频教程：目标不清晰、散漫不专注、孤单、没有回顾总结，易放弃（遗忘、注意力转移）</li>
<li>正规课程：目标清晰（结课证）、专注（每周测验）、作业互评、论坛讨论，易放弃（压力）</li>
<li>专业教育的未来（非基本教育）</li>
</ul>
<h3 id="建议">建议</h3><ul>
<li>根据兴趣上手，不必贪多，先坚持完成 1 门课(4-6h/w 并不容易)</li>
<li>只对视频教程感兴趣？为网易公开课点个赞</li>
</ul>
<h2 id="dispatch_sync的坑_-_潘君">dispatch_sync的坑 - 潘君</h2><ul>
<li><p>官方文档</p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dispatch_sync</span><br><span class="line">Submits a <span class="keyword">block</span> object <span class="keyword">for</span> execution <span class="keyword">on</span> a dispatch queue <span class="keyword">and</span> waits <span class="keyword">until</span> that <span class="keyword">block</span> completes.</span><br><span class="line"></span><br><span class="line">。。。。。</span><br><span class="line"></span><br><span class="line">As an optimization, this <span class="keyword">function</span> invokes the <span class="keyword">block</span> <span class="keyword">on</span> the current thread <span class="keyword">when</span> possible.</span><br></pre></td></tr></table></figure>
</li>
<li><p>dispatch_sync 卡页面, 原因见官方说明最后一句，优化搞的鬼</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">写 <span class="comment">(删除操作)</span> dispatch_sy<span class="label">nc</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>队列分为两种，一种是Serial Dispatch Queue，还有一种是Concurrent Dispatch Queue。</p>
</li>
<li><p>xun核心模块决定线程数</p>
</li>
</ul>
<p>参考资料：</p>
<ul>
<li><a href="http://zhangbuhuai.com/2015/04/11/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3dispatch_sync/" target="_blank" rel="external">深入理解dispatch_sync</a></li>
<li><a href="http://stackoverflow.com/questions/13972048/dispatch-sync-always-scheduling-a-block-on-main-thread" target="_blank" rel="external">dispatch_sync always scheduling a block on Main Thread</a></li>
</ul>
<h1 id="英语，程序员">英语，程序员</h1><h3 id="网站">网站</h3><ul>
<li><p><a href="http://www.italki.com" target="_blank" rel="external">iTalki</a></p>
<blockquote>
<p>语言交换及专业老师订课辅导的网站</p>
</blockquote>
</li>
<li><p><a href="https://www.youtube.com/channel/UCwA7Aepp7nRUJNa8roQ-6Bw" target="_blank" rel="external">YouTube一个订阅号</a></p>
<blockquote>
<p>比较有吸引力的老师，他的同事频道也很不错</p>
</blockquote>
</li>
<li><p><a href="http://www.raywenderlich.com/" target="_blank" rel="external">rayWenderlich</a></p>
<blockquote>
<p>主要是iOS方面的，安卓覆盖一些。涵盖文字、视频、播客三方面</p>
</blockquote>
</li>
</ul>
<h3 id="APP">APP</h3><ul>
<li><p>飞鱼口语</p>
<blockquote>
<p>国内开发的一个及时练习口语的APP，主要是方便</p>
</blockquote>
</li>
<li><p>每日英语听力（欧陆词典推出的）</p>
<blockquote>
<p>radio 模块很不错，资源不算多但比较有质量。</p>
</blockquote>
</li>
<li><p>Podcast</p>
<ul>
<li>圆桌会议（RoundTable）</li>
<li>rayWenderlich （程序员职业发展及新技术点探讨，英式口语）</li>
</ul>
</li>
</ul>
<h3 id="工具">工具</h3><ul>
<li>Skype 和志同道合的人交流，练习口语 </li>
</ul>
<h3 id="EF_Education">EF Education</h3><ul>
<li><a href="http://ec.ef.com" target="_blank" rel="external">网站地址</a><blockquote>
<p>想小试牛刀的记得想我拿一下账号密码</p>
</blockquote>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-2015-10-16-谈谈未来，职业规划，梦想" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/16/2015-10-16-谈谈未来，职业规划，梦想/" class="article-date">
  	<time datetime="2015-10-16T10:30:00.000Z" itemprop="datePublished">2015-10-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/16/2015-10-16-谈谈未来，职业规划，梦想/">周精益分享-谈谈未来、梦想、职业规划</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="实现时间自由_-_王胜">实现时间自由 - 王胜</h2><ul>
<li>近期技术打工、为公司技术出一份力</li>
<li>伺机合伙创业<ul>
<li>自己作为技术的Partner</li>
<li>需求靠谱的产品经理合伙创业</li>
<li>如果有靠谱的市场/资方人事的合伙人就更完美了</li>
</ul>
</li>
<li>财富自由和时间自由后<ul>
<li>周游开拓视野</li>
<li>做一些自己感兴趣的东西，不求有市场，只求自己感觉有价值，好玩就行</li>
</ul>
</li>
</ul>
<h2 id="品质生活_-_吴明">品质生活 - 吴明</h2><ul>
<li>短期目标<ul>
<li>学习和开发使用Material Design</li>
</ul>
</li>
<li>长期目标：以下目标之一<ul>
<li>技术专家</li>
<li>管理和技术</li>
<li>换行业</li>
</ul>
</li>
<li>第二职业<ul>
<li>除工作之外培养第二职业</li>
<li>第二职业主要兴趣爱好方向</li>
<li>不求工资和市场价值高低，只追求兴趣快乐</li>
</ul>
</li>
</ul>
<h2 id="兴趣主导，快乐很重要_-_杨志平">兴趣主导，快乐很重要 - 杨志平</h2><ul>
<li><p>兴趣</p>
<ul>
<li>在失去当前工作兴趣之前，不会转行</li>
<li>职业规划随兴趣走</li>
</ul>
</li>
<li><p>肉身翻墙</p>
<ul>
<li>出去走一遭，趁年轻（工作或打工旅行）</li>
<li>去牛逼公司镀金</li>
</ul>
</li>
<li><p>终极目标</p>
<ul>
<li>年轻时，向往自由工作者的工作方式，能够养活自己的游行工作方式</li>
<li>适当年纪收心回归平常心（保持感兴趣的工作即可）</li>
</ul>
</li>
</ul>
<h2 id="一步一个脚印，顺其自然-王进">一步一个脚印，顺其自然-王进</h2><ul>
<li><p>近期目标，一步一个脚印，不断提高自己</p>
<ul>
<li>做好现在工作，打下坚实的基础</li>
<li>专注于技术，近期不考虑创业，转行等</li>
<li>顺其自然，当未来出现创业等机会，自己也准备好了，也不错过</li>
</ul>
</li>
<li><p>未来愿景：</p>
<ul>
<li>看好移动端的未来发展，以会后向智能家居，物联网方向发展</li>
<li>最终希望能在未来能有时间与机会出去走走</li>
</ul>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-周精益分享-设计规范交流 " class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/25/周精益分享-设计规范交流 /" class="article-date">
  	<time datetime="2015-09-25T10:30:00.000Z" itemprop="datePublished">2015-09-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/25/周精益分享-设计规范交流 /">周精益分享-设计规范交流</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Label的一些使用规范_-_杨志平">Label的一些使用规范 - 杨志平</h1><h2 id="动态适应字体大小">动态适应字体大小</h2><blockquote>
<p>iOS系统自带的常见字体样式（字号及粗细等等）</p>
<ul>
<li>UIFontTextStyleHeadline</li>
<li>UIFontTextStyleSubheadline</li>
<li>UIFontTextStyleBody</li>
<li>UIFontTextStyleFootnote</li>
<li>UIFontTextStyleCaption1</li>
<li>UIFontTextStyleCaption2</li>
</ul>
</blockquote>
<h3 id="效果如下：">效果如下：</h3><p><img src="http://useyourloaf.com/assets/images/2013/2013-12-16-002.png" alt="Font"></p>
<h3 id="代码">代码</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字体初始化</span></span><br><span class="line"><span class="built_in">UIFont</span> *font = [<span class="built_in">UIFont</span> preferredFontForTextStyle:<span class="built_in">UIFontTextStyleBody</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通知需要刷新的文本字体</span></span><br><span class="line">    [[<span class="built_in">NSNotificationCenter</span> defaultCenter]addObserver:<span class="keyword">self</span></span><br><span class="line">                                           selector:<span class="keyword">@selector</span>(userTextSizeDidChange)</span><br><span class="line">                                               name:<span class="built_in">UIContentSizeCategoryDidChangeNotification</span></span><br><span class="line">                                             object:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<h1 id="国际化支持（适配注意点）">国际化支持（适配注意点）</h1><h4 id="工具：genstrings">工具：<a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/genstrings.1.html" target="_blank" rel="external">genstrings</a></h4><h4 id="参考：博客链接">参考：<a href="http://objccn.io/issue-9-3/" target="_blank" rel="external">博客链接</a></h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">先看看它的宏定义：</span><br><span class="line"><span class="hexcolor">#def</span>ine <span class="function"><span class="title">NSLocalizedString</span><span class="params">(key, comment)</span></span> </span><br><span class="line">[[NSBundle mainBundle] localizedStringForKey:(key) value:@<span class="string">""</span> <span class="tag">table</span>:nil]</span><br></pre></td></tr></table></figure>
<p><strong>本地化对象：</strong>标签和按钮上的文本，或者在运行时获取的字符串和数据动态生成的字符串。</p>
<h3 id="难点">难点</h3><h4 id="不同语言的语法问题">不同语言的语法问题</h4><blockquote>
<p>语序，人称不一致：<br>「Paul invited you」和「You invited Paul」 -&gt; 「%@ invited %@」，看似可以<br>以德语为例，「Paul invited you」译为「Paul hat dich eingeladen」，<br>而「You invited Paul」则译为「Du hast Paul eingeladen」。<br>正确处理其他语言的特殊语法方案:「%@ invited you」和「You invited %@」。</p>
</blockquote>
<h4 id="一词多意">一词多意</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">run</span> <span class="bash">-&gt; </span><br><span class="line"></span>	 vt. &amp; vi. 跑</span><br><span class="line">	 移动</span><br><span class="line">	 (使)流动</span><br><span class="line">	 n. 跑, 奔跑</span><br><span class="line">	 旅行, 旅程</span><br><span class="line">	 行驶路线</span><br><span class="line">	 时期; 一段时间</span><br></pre></td></tr></table></figure>
<p>正确做法：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">NSLocalizedString</span><span class="params">(@<span class="string">"activity-profile.title.the-run"</span>, nil)</span></span>  </span><br><span class="line"><span class="function"><span class="title">NSLocalizedString</span><span class="params">(@<span class="string">"home.button.start-run"</span>, nil)</span></span></span><br></pre></td></tr></table></figure>
<p>或者：(完全没有试过)</p>
<blockquote>
<p>NSLocalizedString 有一些变体能够提供更多字符串本地化的操作方式。NSLocalizedStringFromTable 接收 key、table 和 comment 这三个参数，其中 table 参数表示该字符串对应的一个表格，genstrings 会为表中的每一个条目生成一个以条目名称（假设为 table-item）命名的独立字符串文件 table-item.strings。<br>这样你就可以把字符串文件分割成几个小一些的文件。在一个庞大的项目或者团队中工作时，这一点显得尤为重要。同时这也让合并原有的和重新生成的字符串文件变得容易一些。</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">NSLocalizedStringFromTable</span><span class="params">(@<span class="string">"home.button.start-run"</span>, @<span class="string">"ActivityTracker"</span>, @<span class="string">"some comment.."</span>)</span></span></span><br></pre></td></tr></table></figure>
<h3 id="调试本地化字符串（拓展）">调试本地化字符串（拓展）</h3><p>应用支持的语言版本越多，确保所有元素都正确显示就越难。但是这里有一些默认的用户选项和工具可以减轻你的负担。</p>
<blockquote>
<p>NSDoubleLocalizedStrings<br>AppleTextDirection<br>NSForceRightToLeftWritingDirection<br>选项保证你的布局不会因为长字符串或者从右往左读的语言而混乱。</p>
<p>NSShowNonLocalizedStrings<br>NSShowNonLocalizableStrings<br>则可以帮助你找到没有翻译的字符串和根本没有制定字符串本地化宏的字符串。</p>
</blockquote>
<h2 id="单位和度量_-吴明">单位和度量 -吴明</h2><h4 id="Android基本单位规范_-吴明">Android基本单位规范  -吴明</h4><h5 id="单位和度量">单位和度量</h5><ul>
<li>像素密度<ul>
<li>每英寸的像素数被称为“像素密度”。</li>
<li>DPI =屏幕宽度（或高度）像素/屏幕宽度（或高度）英寸</li>
<li>mdpi-160dpi,<br>hdpi-480x800-240dpi,<br>xhdpi-720x1280-320dpi,<br>xxhdpi-1080x1920-480dpi</li>
<li>mipmap-hdpi,<br>  drawable-hdpi区别:用mipmap会缩放图片并优化性能。</li>
<li><img src="http://www.2cto.com/uploadfile/Collfiles/20150718/2015071808335256.png" alt="MacDown Screenshot"></li>
</ul>
</li>
<li>密度独立像素<ul>
<li>“密度独立”是指在屏幕上用不同的密度来统一的显示用户界面元素</li>
<li><img src="http://wiki.jikexueyuan.com/project/material-design/images/4_5.png" alt="MacDown Screenshot"></li>
<li>1dp 和 160 dpi 屏幕的一个物理像素相等。计算 dp 的方法：<br><code><em>dp =(宽度像素</em>160)/ dpi**</code></li>
</ul>
</li>
<li><p>可扩展像素（sp）</p>
<ul>
<li>在为安卓系统开发程序时，可扩展的像素（SP）提供和DP一样的功能，但只是在字体上。一个 SP 的默认值和 DP 上的默认值一样。</li>
<li>density==scaledDensity,即1sp=1dp，</li>
<li><p>还是采用dp替代sp,<a href="http://www.oschina.net/question/272860_70761" target="_blank" rel="external">为什么</a></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">applyDimension</span>(<span class="params"><span class="keyword">int</span> unit, <span class="keyword">float</span> <span class="keyword">value</span>,DisplayMetrics metrics</span>)</span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (unit) &#123;</span><br><span class="line">    <span class="keyword">case</span> COMPLEX_UNIT_PX:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">value</span>;</span><br><span class="line">    <span class="keyword">case</span> COMPLEX_UNIT_DIP:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.density;</span><br><span class="line">    <span class="keyword">case</span> COMPLEX_UNIT_SP:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.scaledDensity;</span><br><span class="line">    <span class="keyword">case</span> COMPLEX_UNIT_PT:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.xdpi * (<span class="number">1.0</span>f/<span class="number">72</span>);</span><br><span class="line">    <span class="keyword">case</span> COMPLEX_UNIT_IN:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.xdpi;</span><br><span class="line">    <span class="keyword">case</span> COMPLEX_UNIT_MM:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.xdpi * (<span class="number">1.0</span>f/<span class="number">25.4</span>f);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>pt(磅)，标准的长度单位，1pt＝1/72英寸，用于印刷业,买蛋糕的时候挺说最多</p>
</li>
<li>em,em指字体高,1em=16px,任意浏览器的默认字体高都是16px.</li>
</ul>
<h5 id="字体排版">字体排版</h5><ul>
<li>字体排版的缩放和基本样式<ul>
<li>同时使用过多的字体尺寸和样式可以很轻易的毁掉布局,最基本的样式集合就是基于 12、14、16、20 和 34 号的字体排版缩放,以下Google建议字体尺寸:<br><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_style1.png" alt="MacDown Screenshot"></li>
</ul>
</li>
<li>基本色/色彩对比度<ul>
<li>最基本的常识是，相同颜色的背景和文字是很难阅读的。但有些人不知道的是，带有过强对比度的文本会有些炫目，同样难以阅读。</li>
<li>文本应当满足对比度7:1的是最适合阅读,最低的对比度4.5:1(依据明度计算),</li>
<li>Google对比度建议:<img src="http://wiki.jikexueyuan.com/project/material-design/images/style-typography-16_large_mdpi.png" alt="MacDown Screenshot"></li>
</ul>
</li>
<li>行高<ul>
<li>只有“主体”、“次要标题”、“大纲”等类似的样式中才允许使用自动换行。其它所有样式应当以单行形式出现。</li>
<li><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_lineheight_tall1.png" alt="MacDown Screenshot"></li>
<li>For all styles, line height is 0.1em larger than the English-like languages. English and English-like languages mostly use a portion of the em box, often the lower portion below the x-height. Chinese, Japanese, and Korean (CJK) ideographic characters use the entire em box. Characters in tall languages often have long descenders and/or ascenders. To achieve the same design intention as English for CJK and to avoid potential text clipping between two lines next to each other for tall languages, the line height needs to be larger than in English for tall and dense languages.</li>
</ul>
</li>
<li>换行规则/连字符<ul>
<li>正确：<br><img src="http://wiki.jikexueyuan.com/project/material-design/images/style-typography-32_large_mdpi.png" alt="MacDown Screenshot"></li>
<li>错误<br><img src="http://wiki.jikexueyuan.com/project/material-design/images/style-typography-33_large_mdpi.png" alt="MacDown Screenshot"></li>
</ul>
</li>
<li><p>每行字符</p>
<ul>
<li><a href="http://baymard.com/blog/line-length-readability" target="_blank" rel="external">每行应当保持在50-60个字符左右</a></li>
<li>太长,用户的眼睛将难以找到在文本上对焦。这是因为过长的文字导致用户难以判断一行的起始点，甚至在大段文字中出现读错行的现象</li>
<li>太短，会导致眼睛来回扫视过于频繁，破坏阅读的节奏。过短的内容还会给人压力，导致用户完成本行阅读前过早跳转到下一行阅读(因此会错过潜在的重要信息)</li>
<li><p><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_styles_linelengths1.png" alt="MacDown Screenshot"></p>
<ul>
<li><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_styles_linelengths2.png" alt="MacDown Screenshot"></li>
</ul>
</li>
</ul>
</li>
<li>字间距<ul>
<li><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_styles_tracking.png" alt="MacDown Screenshot"></li>
<li></li>
</ul>
</li>
</ul>
<h2 id="设计规范之我见_-_张超耀">设计规范之我见 - 张超耀</h2><h2 id="设计规范阅读心得_-_潘君">设计规范阅读心得 - 潘君</h2><h3 id="官方设计文档">官方设计文档</h3><p>参考资料：<a href="http://isux.tencent.com/ios8-human-interface-guidelines.html" target="_blank" rel="external">[ISUX转译]iOS 8人机界面指南（一）：UI设计基础</a></p>
<ul>
<li>突出内容</li>
<li>统一</li>
<li>为变化做好准备<ul>
<li>压缩 </li>
<li>拉伸</li>
</ul>
</li>
<li>充足的互动空间</li>
<li>路径合理</li>
<li>注意层级</li>
<li>使用标准的手势</li>
<li>页面切换过渡需要有焦点</li>
<li>反馈要准确</li>
</ul>
<h3 id="案例">案例</h3><p>参考资料：<a href="http://beforweb.com/node/766" target="_blank" rel="external">向用户征询iOS授权的五种常见设计模式</a></p>
<h2 id="设计规范之奇妙的Z轴-_王进">设计规范之奇妙的Z轴- 王进</h2><h3 id="Z轴组成：">Z轴组成：</h3><blockquote>
<p>z=elevation+translationZ;</p>
</blockquote>
<ul>
<li>eleavation是静态的成员，静止高度，是不会变化的。当一个对象的高度产生变化时，它将会尽快恢复到自身的静止高度。</li>
</ul>
<p>translationZ是用来做动画。动态高度偏移</p>
<ul>
<li>在layout中使用 android:elevation属性去定义 </li>
</ul>
<p>在代码中使用 View.setElevation 方法去定义 </p>
<ul>
<li><p>在layout中使用 android:translationz属性去定义设置视图的translation，可以使用View.setTranslationZ方法 </p>
</li>
<li><p>新的属性值：translationZ允许你创建一个动画暂时的反应出View的高度值（elevation）变化。</p>
</li>
</ul>
<p>这对于响应触摸手势很有用处:</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">int</span> action = motionEvent.getActionMasked();  </span><br><span class="line"></span><br><span class="line">                <span class="comment">/* Raise view on ACTION_DOWN and lower it on ACTION_UP. */</span>  </span><br><span class="line"></span><br><span class="line">                <span class="keyword">switch</span> (action) &#123;  </span><br><span class="line"></span><br><span class="line">                    <span class="keyword">case</span> MotionEvent.ACTION_DOWN:  </span><br><span class="line"></span><br><span class="line">                        Log.d(TAG, <span class="string">"ACTION_DOWN on view."</span>);  </span><br><span class="line"></span><br><span class="line">                        view.setTranslationZ(<span class="number">120</span>);  </span><br><span class="line"></span><br><span class="line">                        <span class="keyword">break</span>;  </span><br><span class="line"></span><br><span class="line">                    <span class="keyword">case</span> MotionEvent.ACTION_UP:  </span><br><span class="line"></span><br><span class="line">                        Log.d(TAG, <span class="string">"ACTION_UP on view."</span>);  </span><br><span class="line"></span><br><span class="line">                        view.setTranslationZ(<span class="number">0</span>);  </span><br><span class="line"></span><br><span class="line">                        <span class="keyword">break</span>;  </span><br><span class="line"></span><br><span class="line">                    <span class="keyword">default</span>:  </span><br><span class="line"></span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">false</span>;  </span><br><span class="line"></span><br><span class="line">                &#125;</span><br></pre></td></tr></table></figure>
<h3 id="系统高度参考">系统高度参考</h3><p><img src="http://wiki.jikexueyuan.com/project/material-design/images/3_2.png" alt=""></p>
<h3 id="高度特性：">高度特性：</h3><ul>
<li><p>“高度”的度量单位与 XY 轴的度量单位相同，主要是 DP。由于所有 Material 元素都具有 1 单位 DP 的厚度，所以“高度”度量的是从一个平面顶部到另一个平面顶部的距离。</p>
</li>
<li><p>一个子对象的高度与其父对象的高度相关</p>
</li>
</ul>
<h3 id="阴影">阴影</h3><p>“阴影”提供了对象深度和方向性移动的重要视觉线索。它们是唯一一种标示不同平面之间分离程度的视觉线索。某一对象的“高度”决定了其具体“阴影”的表现形式。</p>
<ul>
<li>Z 轴影响阴影效果</li>
</ul>
<p>z轴越大，阴影越明显，</p>
<ul>
<li>Z轴影响View 的绘制顺序：</li>
</ul>
<p>在同一个父view内部，z轴越小，绘制越早，z轴后绘制的会覆盖先前绘制的，只有Z轴相同，才按照添加循序绘制</p>
<ul>
<li><p>Z轴属性会扩大view的显示区域，如果他的大小≥父控件大小，他的阴影效果就无法显示</p>
</li>
<li></li>
</ul>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;TextView</span><br><span class="line"></span><br><span class="line">          android:<span class="variable">layout_marginTop=</span><span class="string">"20dp"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">layout_marginBottom=</span><span class="string">"20dp"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">gravity=</span><span class="string">"center"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">text=</span><span class="string">"2dp"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">textColor=</span><span class="string">"#88000000"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">layout_width=</span><span class="string">"150dp"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">layout_height=</span><span class="string">"100dp"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">elevation=</span><span class="string">"2dp"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">background=</span><span class="string">"#ffffff"</span>/&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &lt;TextView</span><br><span class="line"></span><br><span class="line">          android:<span class="variable">layout_marginTop=</span><span class="string">"20dp"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">layout_marginBottom=</span><span class="string">"20dp"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">layout_marginLeft=</span><span class="string">"20dp"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">gravity=</span><span class="string">"center"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">text=</span><span class="string">"4dp"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">textColor=</span><span class="string">"#88000000"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">layout_width=</span><span class="string">"150dp"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">layout_height=</span><span class="string">"100dp"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">elevation=</span><span class="string">"4dp"</span></span><br><span class="line"></span><br><span class="line">          android:<span class="variable">background=</span><span class="string">"#ffffff"</span>/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>使用直接使用图片（除非shape)，设置z轴，阴影效果不会显示，必须通过代码viewOutlineProvider指明轮廓</p>
<ul>
<li>在layout中使用android：outlineProvider属性</li>
</ul>
<blockquote>
<p>none 即使设置里z轴也不会显示阴影</p>
</blockquote>
<p>background 按照background 设置背景</p>
<p>bounds  按照view 大小设置背景</p>
<p>paddedbounds 与bounds 类似，不过背景向右偏些</p>
</li>
</ul>
<ul>
<li>代码设置</li>
</ul>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ViewOutlineProvider viewOutlineProvider = new ViewOutlineProvider<span class="params">()</span> &#123;  </span><br><span class="line"></span><br><span class="line">    @Override  </span><br><span class="line"></span><br><span class="line">    public void getOutline<span class="params">(View view, Outline outline)</span>  </span><br><span class="line"></span><br><span class="line">        <span class="comment">//可以指定圆形，矩形，圆角矩形，path</span></span><br><span class="line"></span><br><span class="line">        outline.setOval<span class="params">(<span class="number">0</span>, <span class="number">0</span>, view.getWidth<span class="params">()</span>, view.getHeight<span class="params">()</span>)</span>;  </span><br><span class="line"></span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">&#125;;  </span><br><span class="line"></span><br><span class="line">fab.setOutlineProvider<span class="params">(viewOutlineProvider)</span>;?</span><br></pre></td></tr></table></figure>
<h3 id="两层阴影">两层阴影</h3><p><img src="https://pic2.zhimg.com/65fe5d60a56fd38f968fd2d1e991a889_b.jpg" alt=""></p>
<p><img src="https://pic2.zhimg.com/e2c6e088fd8ea8fc3e5ccdfb2e4e3199_b.jpg" alt=""></p>
<ul>
<li><p>这两层阴影, 一层是环境光投射的阴影, 另一层是关键光照射在 material 上投射的阴影.这两种光线叠加在一起, 才能构成 material design 中的阴影.</p>
</li>
<li><p>而理论上, 这两种阴影都应该是有平滑曲线的, 但是由于手机处理器性能问题, 实时计算平滑后的阴影会导致可怕的耗电与发热, 所以 Google 只能在这方面妥协, 将阴影曲线拉直, 直接导致某些阴影效果变差.通过叠加可以模拟真实的曲线阴影。</p>
</li>
</ul>
<p><img src="https://pic2.zhimg.com/12b97051d79c5f018461d7954594308d_b.jpg" alt=""></p>
<p>链接：<a href="http://www.zhihu.com/question/28865209/answer/42749018" target="_blank" rel="external">http://www.zhihu.com/question/28865209/answer/42749018</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-周精益分享-自由主题" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/14/周精益分享-自由主题/" class="article-date">
  	<time datetime="2015-09-14T12:00:00.000Z" itemprop="datePublished">2015-09-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/14/周精益分享-自由主题/">周精益分享-自由主题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="浅拷贝与深拷贝_-_杨志平">浅拷贝与深拷贝 - 杨志平</h2><blockquote>
<p> 程序中经常会遇到集合类的传值 <br><br> <strong> 坑：</strong> 数组操作时对于数组中的对象拷贝</p>
</blockquote>
<h3 id="目的：">目的：</h3><p>观察array1、mArrayCopy、mArrayCopy2 三者区别</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *array1 = [<span class="built_in">NSArray</span> arrayWithObjects:[<span class="built_in">NSMutableString</span> stringWithString:<span class="string">@"a"</span>],<span class="string">@"b"</span>,<span class="string">@"c"</span>,<span class="literal">nil</span>];</span><br><span class="line"><span class="built_in">NSArray</span> *mArrayCopy = [[<span class="built_in">NSArray</span> alloc] initWithArray:array1 copyItems:<span class="literal">YES</span>];</span><br><span class="line"><span class="built_in">NSArray</span>* mArrayCopy2 = [<span class="built_in">NSKeyedUnarchiver</span> unarchiveObjectWithData:[<span class="built_in">NSKeyedArchiver</span> archivedDataWithRootObject: array1]];</span><br></pre></td></tr></table></figure>
<h3 id="首先了解copy与retain的区别">首先了解copy与retain的区别</h3><p><strong> OC对象引用计数器：屋里开灯规则 </strong></p>
<blockquote>
<p>copy是创建一个新对象，retain是创建一个指针，引用对象计数加1。Copy属性表示两个对象内容相同，新的对象retain为1 ，与旧有对象的引用计数无关，旧有对象没有变化。</p>
<p>retain属性表示两个对象地址相同（建立一个指针，指针拷贝），内容当然相同，这个对象的retain值+1也就是说，retain 是指针拷贝，copy 是内容拷贝。</p>
</blockquote>
<h3 id="主角：copy、mutableCopy">主角：copy、mutableCopy</h3><p><strong><em>注意：可变和不可变对象使用copy、mutableCopy的区别</em></strong></p>
<blockquote>
<p>遵守NSCopying 协议的类可以发送copy消息，<br>遵守NSMutableCopying 协议的类才可以发送mutableCopy消息。</p>
<p>默认的ios类并没有遵守这两个协议<br>自定义copy 必须遵守NSCopying,并且实现 copyWithZone: 方法<br>自定义mutableCopy 那么就必须遵守NSMutableCopying,并且实现 mutableCopyWithZone: 方法</p>
</blockquote>
<h3 id="实例">实例</h3><h5 id="系统的非容器类对象">系统的非容器类对象</h5><blockquote>
<p>这里指的是NSString,NSNumber等等一类的对象。</p>
</blockquote>
<p>示例1：<br>不可变string</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *string = <span class="string">@"origionStr"</span>;</span><br><span class="line"><span class="built_in">NSString</span> *string2 = string;</span><br><span class="line"><span class="built_in">NSString</span> *stringCopy = [string <span class="keyword">copy</span>];</span><br><span class="line"><span class="built_in">NSMutableString</span> *stringMCopy = [string mutableCopy];</span><br><span class="line">[stringMCopy appendString:<span class="string">@"!!!!"</span>];</span><br><span class="line"><span class="comment">// log</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"string      = %p %p %@ "</span>,string,&amp;string,string);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"string2     = %p %p %@ "</span>,string2,&amp;string2,string2);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"stringCopy  = %p %p %@ "</span>,stringCopy,&amp;stringCopy,stringCopy);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"stringMCopy = %p %p %@ "</span>,stringMCopy,&amp;stringMCopy,stringMCopy);</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string      = <span class="number">0x1064e70</span>88		0x7fff<span class="number">597190a0</span> origionStr </span><br><span class="line">string2     = <span class="number">0x1064e70</span>88 		0x7fff<span class="number">59719098</span> origionStr </span><br><span class="line">stringCopy  = <span class="number">0x1064e70</span>88 		0x7fff<span class="number">59719090</span> origionStr </span><br><span class="line">stringMCopy = 0x7fafebdbb<span class="number">4b0	0x7</span>fff<span class="number">59719088</span> origionStr!!!!</span><br></pre></td></tr></table></figure>
<p>示例2：<br>可变string</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">NSMutableString *<span class="built_in">string</span> = [NSMutableString stringWithStrin<span class="variable">g:</span> @<span class="string">"origion"</span>];</span><br><span class="line">NSString *stringCopy = [<span class="built_in">string</span> <span class="built_in">copy</span>];</span><br><span class="line">NSMutableString *mStringCopy = [<span class="built_in">string</span> <span class="built_in">copy</span>];</span><br><span class="line">NSMutableString *stringMCopy = [<span class="built_in">string</span> mutableCopy];</span><br><span class="line">[<span class="built_in">string</span> appendStrin<span class="variable">g:</span>@<span class="string">" origion!"</span>];</span><br><span class="line">[stringMCopy appendStrin<span class="variable">g:</span>@<span class="string">"!!"</span>];</span><br><span class="line">NSLog(@<span class="string">"string      = %p %@"</span>,<span class="built_in">string</span>,<span class="built_in">string</span>);</span><br><span class="line">NSLog(@<span class="string">"stringCopy  = %p %@"</span>,stringCopy,stringCopy);</span><br><span class="line">NSLog(@<span class="string">"stringMCopy = %p %@"</span>,mStringCopy,mStringCopy);</span><br><span class="line">NSLog(@<span class="string">"stringMCopy = %p %@"</span>,stringMCopy,stringMCopy);</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">string </span>     = <span class="number">0x7fafebdec820</span> origion origion!</span><br><span class="line"><span class="keyword">stringCopy </span> = <span class="number">0x7fafebdcb8c0</span> origion</span><br><span class="line"><span class="keyword">stringMCopy </span>= <span class="number">0x7fafebda4320</span> origion</span><br><span class="line"><span class="keyword">stringMCopy </span>= <span class="number">0x7fafebd32890</span> origion!!</span><br></pre></td></tr></table></figure>
<blockquote>
<p>对于系统的非容器类对象，我们可以认为，如果对一不可变对象复制，copy是指针复制（浅拷贝）和mutableCopy就是对象复制（深拷贝）。如果是对可变对象复制，都是深拷贝，但是copy返回的对象是不可变的。</p>
</blockquote>
<h5 id="系统的容器类对象">系统的容器类对象</h5><blockquote>
<p>指NSArray,NSSet,NSDictionary等。对于容器类本身，上面讨论的结论也是适用的，需要探讨的是复制后容器内对象的变化。</p>
</blockquote>
<p>示例1：<br>不可变数组</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//copy返回不可变对象，mutablecopy返回可变对象</span></span><br><span class="line"><span class="built_in">NSArray</span> *array1 = [<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"a"</span>,<span class="string">@"b"</span>,<span class="string">@"c"</span>,<span class="literal">nil</span>];</span><br><span class="line"><span class="built_in">NSArray</span> *arrayCopy1 = [array1 <span class="keyword">copy</span>];</span><br><span class="line"><span class="built_in">NSMutableArray</span> *mArrayCopy1 = [array1 mutableCopy];</span><br><span class="line">[mArrayCopy1 addObject:<span class="string">@"de"</span>];</span><br><span class="line">[mArrayCopy1 removeObjectAtIndex:<span class="number">0</span>];</span><br><span class="line"><span class="comment">// log</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"array1      = %p %@ %p %@"</span>,array1,array1,array1[<span class="number">1</span>],array1[<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"arrayCopy1  = %p %@ %p %@"</span>,arrayCopy1,arrayCopy1,arrayCopy1[<span class="number">1</span>],arrayCopy1[<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"mArrayCopy1 = %p %@ %p %@"</span>,mArrayCopy1,mArrayCopy1,mArrayCopy1[<span class="number">0</span>],mArrayCopy1[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array1      = <span class="number">0</span>x7fafebdeaed0 (<span class="tag">a</span>,<span class="tag">b</span>,c) 	<span class="number">0</span>x1064e7228 <span class="tag">b</span></span><br><span class="line">arrayCopy1  = <span class="number">0</span>x7fafebdeaed0 (<span class="tag">a</span>,<span class="tag">b</span>,c) 	<span class="number">0</span>x1064e7228 <span class="tag">b</span></span><br><span class="line">mArrayCopy1 = <span class="number">0</span>x7fafebdfc010 (<span class="tag">b</span>,c,de) 	<span class="number">0</span>x1064e7228 b</span><br></pre></td></tr></table></figure>
<p>示例：<br>可变数组</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="name">NSArray</span> *<span class="atom">array1</span> = [<span class="name">NSArray</span> <span class="atom">arrayWithObjects</span>:@<span class="string">"a"</span>,@<span class="string">"b"</span>,@<span class="string">"c"</span>,<span class="atom">nil</span>];</span><br><span class="line"><span class="name">NSMutableArray</span> *<span class="atom">mArrayCopy</span> = [[<span class="name">NSMutableArray</span> <span class="atom">alloc</span>] <span class="atom">initWithArray</span>:<span class="atom">array1</span> <span class="atom">copyItems</span>:<span class="name">YES</span>];</span><br><span class="line"><span class="name">NSLog</span>(@<span class="string">"array1      = %p %@ %p %@ %p %@"</span>,<span class="atom">array1</span>,    <span class="atom">array1</span>,     <span class="atom">array1</span>[<span class="number">0</span>],      <span class="atom">array1</span>[<span class="number">0</span>],      <span class="atom">array1</span>[<span class="number">1</span>],      <span class="atom">array1</span>[<span class="number">1</span>]);</span><br><span class="line"><span class="name">NSLog</span>(@<span class="string">"arrayCopy1  = %p %@ %p %@ %p %@"</span>,<span class="atom">mArrayCopy</span>,<span class="atom">mArrayCopy</span>, <span class="atom">mArrayCopy</span>[<span class="number">0</span>],  <span class="atom">mArrayCopy</span>[<span class="number">0</span>],  <span class="atom">mArrayCopy</span>[<span class="number">1</span>],  <span class="atom">mArrayCopy</span>[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array1      = <span class="number">0</span>x7fafebcb5ae0 (<span class="tag">a</span>,<span class="tag">b</span>,c)	 <span class="number">0</span>x10afe1208 <span class="tag">a</span> <span class="number">0</span>x10afe1228 <span class="tag">b</span></span><br><span class="line">arrayCopy1  = <span class="number">0</span>x7fafebcb5b10 (<span class="tag">a</span>,<span class="tag">b</span>,c)	 <span class="number">0</span>x10afe1208 <span class="tag">a</span> <span class="number">0</span>x10afe1228 b</span><br></pre></td></tr></table></figure>
<p>示例2：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *array1 = [<span class="built_in">NSArray</span> arrayWithObjects:[<span class="built_in">NSMutableString</span> stringWithString:<span class="string">@"a"</span>],<span class="string">@"b"</span>,<span class="string">@"c"</span>,<span class="literal">nil</span>];</span><br><span class="line"><span class="built_in">NSMutableArray</span> *mArrayCopy = [[<span class="built_in">NSMutableArray</span> alloc] initWithArray:array1 copyItems:<span class="literal">YES</span>];</span><br><span class="line"><span class="built_in">NSArray</span>* mArrayCopy2 = [<span class="built_in">NSKeyedUnarchiver</span> unarchiveObjectWithData:[<span class="built_in">NSKeyedArchiver</span> archivedDataWithRootObject: array1]];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>mArrayCopy2是完全意义上的深拷贝，而mArrayCopy则不是</p>
<p>对于mArrayCopy内的不可变元素其还是指针复制。或者我们自己实现深拷贝的方法。因为如果容器的某一元素是不可变的，那你复制完后该对象仍旧是不能改变的，因此只需要指针复制即可。除非你对容器内的元素重新赋值，否则指针复制即已足够。</p>
</blockquote>
<h2 id="APP标注工具_-_王进">APP标注工具 - 王进</h2><ul>
<li>第一个：马克鳗：<ul>
<li><a href="http://www.getmarkman.com/" target="_blank" rel="external">http://www.getmarkman.com/</a></li>
</ul>
</li>
<li>第二个：苦逼APPUI设计师的标注切图的利器—PxCook：<ul>
<li><a href="http://www.fancynode.com.cn/pxcook/home" target="_blank" rel="external">http://www.fancynode.com.cn/pxcook/home</a></li>
</ul>
</li>
</ul>
<h2 id="tracking-sdk之FMDB_&amp;_common字段简单分享_-_张超耀">tracking-sdk之FMDB &amp; common字段简单分享 - 张超耀</h2><h3 id="FMDB">FMDB</h3><ul>
<li>cocoapods管理（优先考虑）</li>
<li>libsqlite3.dylib函数库支持</li>
<li>怎删改 &amp; 查简单实用</li>
<li>object转string时有转义字符，需要客户端进一步处理</li>
</ul>
<h3 id="common字段">common字段</h3><ul>
<li>IP &amp; 经纬度获取（不经意间的惊喜）<a href="http://ip-api.com" target="_blank" rel="external">IP查询</a></li>
<li>其他字段（略）</li>
</ul>
<h3 id="获取经纬度遇到的问题">获取经纬度遇到的问题</h3><ul>
<li>经纬度获取是异步，可能在实时数据上传前还没有获取到，所以暂时取巧用IP解析的地址作为经纬度处理。</li>
</ul>
<h3 id="tracking-sdk_分享_-_潘君">tracking-sdk 分享 - 潘君</h3><ul>
<li>略</li>
</ul>
<h2 id="正则表达式入门_-_曾铭">正则表达式入门 - 曾铭</h2><h3 id="目标">目标</h3><ul>
<li>原理我也不懂，但会用(知道能解决什么问题)能看懂(知道在解决什么问题)很重要</li>
<li>高效</li>
<li>碰到问题多”玩”, 玩玩就会了</li>
</ul>
<h3 id="罗列">罗列</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">\b 单词分割</span><br><span class="line">\<span class="keyword">d</span> 数字</span><br><span class="line">\s 空白符</span><br><span class="line">\w 字母、数字、下划线、汉字</span><br><span class="line">\B \<span class="keyword">D</span> \S \<span class="literal">W</span></span><br><span class="line">[^xyz] 非 xyz</span><br><span class="line">[abc0-9] 字符范围</span><br><span class="line">^ 起始</span><br><span class="line">$ 结束</span><br><span class="line">&#123;<span class="keyword">n</span>&#125; 重复 <span class="keyword">n</span> 次</span><br><span class="line">&#123;<span class="keyword">n</span>,&#125; 重复 <span class="keyword">n</span> 到无穷次</span><br><span class="line">&#123;<span class="keyword">n</span>,<span class="keyword">m</span>&#125; 重复 <span class="keyword">n</span> 到 <span class="keyword">m</span> 次</span><br><span class="line"><span class="comment">* 重复 0 到无穷次</span></span><br><span class="line">+ 重复 1 到无穷次</span><br><span class="line">? 重复 0 或 1 次</span><br><span class="line">| 或</span><br><span class="line">\\ 字符转义</span><br><span class="line">(exp) 捕获</span><br><span class="line">(?&lt;name&gt;exp) 捕获并命名</span><br><span class="line">(?:exp) 不捕获</span><br><span class="line">(?=exp) 匹配exp前面的位置</span><br><span class="line">(?&lt;=exp) 匹配exp后面的位置</span><br><span class="line">(?!exp) 匹配后面跟的不是exp的位置</span><br><span class="line">(?&lt;!exp) 匹配前面不是exp的位置</span><br></pre></td></tr></table></figure>
<h3 id="推荐工具">推荐工具</h3><ul>
<li><a href="http://www.regexbuddy.com/" target="_blank" rel="external">RegexBuddy for Win</a></li>
<li><a href="http://krillapps.com/patterns/" target="_blank" rel="external">Patterns for Mac</a></li>
<li><a href="http://www.regexlab.com/zh/regref.htm" target="_blank" rel="external">正则在线参考</a></li>
</ul>
<h3 id="参考">参考</h3><ul>
<li><a href="http://www.ruanyifeng.com/blog/2009/04/lorem_ipsum.html" target="_blank" rel="external">关于Lorem ipsum</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-那些年我们用过的第三方库" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/21/那些年我们用过的第三方库/" class="article-date">
  	<time datetime="2015-08-21T12:00:00.000Z" itemprop="datePublished">2015-08-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/那些年我们用过的第三方库/">那些年我们用过的第三方库</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="SnapKit（Masonry）_的使用_-_杨志平">SnapKit（Masonry） 的使用 - 杨志平</h2><blockquote>
<p>这两个库的用法都是差不多的，只是由两个不同的人来主导开源  <br><br><strong><a href="https://github.com/SnapKit/SnapKit" target="_blank" rel="external">SnapKit</a></strong>是Swift版 <br><br><strong><a href="https://github.com/SnapKit/Masonry" target="_blank" rel="external">Masonry</a></strong>是OC版    </p>
<p>自动布局及交互式编程是iOS开发的趋势，同时Swift也会在不久将来替换OC语言。所以现在的iOS开发者可以开始学习Swift2.0 以及应用 Autolayout 来编程</p>
</blockquote>
<h3 id="代码对比（概况了解）">代码对比（概况了解）</h3><h5 id="开始前OC原生布局代码">开始前OC原生布局代码</h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">UIView</span> *superview = <span class="keyword">self</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UIView</span> *view1 = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line">view1<span class="variable">.translatesAutoresizingMaskIntoConstraints</span> = <span class="literal">NO</span>;</span><br><span class="line">view1<span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> greenColor];</span><br><span class="line">[superview addSubview:view1];</span><br><span class="line"></span><br><span class="line"><span class="built_in">UIEdgeInsets</span> padding = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">[superview addConstraints:@[</span><br><span class="line"></span><br><span class="line">   <span class="comment">//view1 constraints</span></span><br><span class="line">   [<span class="built_in">NSLayoutConstraint</span> constraintWithItem:view1</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeTop</span></span><br><span class="line">                                relatedBy:<span class="built_in">NSLayoutRelationEqual</span></span><br><span class="line">                                   toItem:superview</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeTop</span></span><br><span class="line">                               multiplier:<span class="number">1.0</span></span><br><span class="line">                                 constant:padding<span class="variable">.top</span>],</span><br><span class="line"></span><br><span class="line">   [<span class="built_in">NSLayoutConstraint</span> constraintWithItem:view1</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeLeft</span></span><br><span class="line">                                relatedBy:<span class="built_in">NSLayoutRelationEqual</span></span><br><span class="line">                                   toItem:superview</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeLeft</span></span><br><span class="line">                               multiplier:<span class="number">1.0</span></span><br><span class="line">                                 constant:padding<span class="variable">.left</span>],</span><br><span class="line"></span><br><span class="line">   [<span class="built_in">NSLayoutConstraint</span> constraintWithItem:view1</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeBottom</span></span><br><span class="line">                                relatedBy:<span class="built_in">NSLayoutRelationEqual</span></span><br><span class="line">                                   toItem:superview</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeBottom</span></span><br><span class="line">                               multiplier:<span class="number">1.0</span></span><br><span class="line">                                 constant:-padding<span class="variable">.bottom</span>],</span><br><span class="line"></span><br><span class="line">   [<span class="built_in">NSLayoutConstraint</span> constraintWithItem:view1</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeRight</span></span><br><span class="line">                                relatedBy:<span class="built_in">NSLayoutRelationEqual</span></span><br><span class="line">                                   toItem:superview</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeRight</span></span><br><span class="line">                               multiplier:<span class="number">1</span></span><br><span class="line">                                 constant:-padding<span class="variable">.right</span>],</span><br><span class="line">	]];</span><br></pre></td></tr></table></figure>
<h5 id="使用Masonry">使用Masonry</h5><p>精简</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">UIEdgeInsets padding = UIEdgeInsetsMake<span class="params">(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)</span>;</span><br><span class="line"></span><br><span class="line">[view1 mas_makeConstraints:^<span class="params">(MASConstraintMaker *make)</span> &#123;</span><br><span class="line">   make.top.equalTo<span class="params">(superview.mas_top)</span>.with.<span class="built_in">offset</span><span class="params">(padding.top)</span>; <span class="comment">//with 	is an optional semantic filler</span></span><br><span class="line">	make.left.equalTo<span class="params">(superview.mas_left)</span>.with.<span class="built_in">offset</span><span class="params">(padding.left)</span>;</span><br><span class="line">	make.bottom.equalTo<span class="params">(superview.mas_bottom)</span>.with.<span class="built_in">offset</span><span class="params">(-	padding.bottom)</span>;</span><br><span class="line">	make.right.equalTo<span class="params">(superview.mas_right)</span>.with.<span class="built_in">offset</span><span class="params">(-padding.right)</span>;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>更加精简</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="collection">[view1 mas_makeConstraints:^<span class="list">(<span class="keyword">MASConstraintMaker</span> *make)</span> <span class="collection">&#123;</span><br><span class="line"> 	 	 make.edges.equalTo<span class="list">(<span class="keyword">superview</span>)</span>.with.insets<span class="list">(<span class="keyword">padding</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;</span>]</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<h5 id="同理使用SnapKit">同理使用SnapKit</h5><p>精简</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">let</span> box = UIView<span class="params">()</span></span><br><span class="line">superview.addSubview<span class="params">(box)</span></span><br><span class="line"></span><br><span class="line">box.snp_makeConstraints &#123; <span class="params">(make)</span> -&gt; Void in</span><br><span class="line">	make.top.equalTo<span class="params">(superview)</span>.<span class="built_in">offset</span><span class="params">(<span class="number">20</span>)</span></span><br><span class="line">	make.left.equalTo<span class="params">(superview)</span>.<span class="built_in">offset</span><span class="params">(<span class="number">20</span>)</span></span><br><span class="line">	make.bottom.equalTo<span class="params">(superview)</span>.<span class="built_in">offset</span><span class="params">(-<span class="number">20</span>)</span></span><br><span class="line">   	make.right.equalTo<span class="params">(superview)</span>.<span class="built_in">offset</span><span class="params">(-<span class="number">20</span>)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>更加精简</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">box.snp_makeConstraints &#123; <span class="function"><span class="params">(make)</span> -&gt;</span> Void <span class="keyword">in</span></span><br><span class="line">   	make.edges.equalTo(superview).inset(UIEdgeInsetsMake(<span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="如何使用_&amp;&amp;_原理">如何使用 &amp;&amp; 原理</h3><h4 id="常见的约束类型对比">常见的约束类型对比</h4><table>
<thead>
<tr>
<th>ViewAttribute</th>
<th>NSLayoutAttribute</th>
</tr>
</thead>
<tbody>
<tr>
<td>view.snp_left</td>
<td>NSLayoutAttribute.Left</td>
</tr>
<tr>
<td>view.snp_right</td>
<td>NSLayoutAttribute.Right</td>
</tr>
<tr>
<td>view.snp_top</td>
<td>NSLayoutAttribute.Top</td>
</tr>
<tr>
<td>view.snp_bottom</td>
<td>NSLayoutAttribute.Bottom</td>
</tr>
<tr>
<td>view.snp_leading</td>
<td>NSLayoutAttribute.Leading</td>
</tr>
<tr>
<td>view.snp_trailing</td>
<td>NSLayoutAttribute.Trailing</td>
</tr>
<tr>
<td>view.snp_width</td>
<td>NSLayoutAttribute.Width</td>
</tr>
<tr>
<td>view.snp_height</td>
<td>NSLayoutAttribute.Height</td>
</tr>
<tr>
<td>view.snp_centerX</td>
<td>NSLayoutAttribute.CenterX</td>
</tr>
<tr>
<td>view.snp_centerY</td>
<td>NSLayoutAttribute.CenterY</td>
</tr>
<tr>
<td>view.snp_baseline</td>
<td>NSLayoutAttribute.Baseline</td>
</tr>
</tbody>
</table>
<h4 id="常见的用法">常见的用法</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">make<span class="class">.top</span><span class="class">.equalTo</span>(<span class="number">42</span>)</span><br><span class="line">make<span class="class">.lessThanOrEqualTo</span><span class="class">.equalTo</span>(SuperView)</span><br><span class="line">make<span class="class">.top</span><span class="class">.equalTo</span>(SuperView)</span><br><span class="line">make<span class="class">.size</span><span class="class">.equalTo</span>(<span class="function"><span class="title">CGSizeMake</span><span class="params">(<span class="number">50</span>, <span class="number">100</span>)</span></span>)</span><br><span class="line">make<span class="class">.edges</span><span class="class">.equalTo</span>(<span class="function"><span class="title">UIEdgeInsetsMake</span><span class="params">(<span class="number">10</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>)</span></span>)</span><br><span class="line">make<span class="class">.left</span><span class="class">.equalTo</span>(view).<span class="function"><span class="title">offset</span><span class="params">(UIEdgeInsetsMake(<span class="number">10</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>)</span></span>)</span><br><span class="line"></span><br><span class="line">make<span class="class">.height</span><span class="class">.equalTo</span>(OtherView).<span class="function"><span class="title">offset</span><span class="params">(<span class="number">10</span>)</span></span></span><br><span class="line">make<span class="class">.trailing</span><span class="class">.equalTo</span>(OtherView.snp_trailing).<span class="function"><span class="title">offset</span><span class="params">(<span class="number">10</span>)</span></span></span><br><span class="line">make<span class="class">.bottom</span><span class="class">.equalTo</span>(-<span class="number">20</span>).<span class="function"><span class="title">priority</span><span class="params">(<span class="number">250</span>)</span></span></span><br></pre></td></tr></table></figure>
<h4 id="对比交互式编程的约束布局">对比交互式编程的约束布局</h4><p><img src="https://cloud.githubusercontent.com/assets/9360037/9401926/1e572316-4809-11e5-9a96-430e688cda85.png" alt="image"></p>
<hr>
<h2 id="JSONModel_for_swift_的探索_-_曾铭">JSONModel for swift 的探索 - 曾铭</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可在 Playground 中尝试</span></span><br><span class="line"><span class="keyword">import</span> <span class="type">Foundation</span></span><br><span class="line"><span class="keyword">import</span> <span class="type">UIKit</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 基本的类型转换</span></span><br><span class="line"><span class="keyword">let</span> a:<span class="type">String</span> = <span class="string">""</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="string">""</span></span><br><span class="line"><span class="keyword">var</span> <span class="built_in">c</span>:<span class="type">String</span>? = <span class="literal">nil</span></span><br><span class="line"><span class="built_in">c</span> = <span class="string">"test"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> d:<span class="type">String</span> = <span class="built_in">c</span> <span class="keyword">as</span> <span class="type">String</span>!</span><br><span class="line"><span class="keyword">var</span> e = <span class="type">Int</span>(<span class="built_in">c</span>!)</span><br><span class="line">e = <span class="type">Int</span>(<span class="string">"123"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="type">Int</span>(<span class="string">"123"</span>)!</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"a type:<span class="subst">\(a.<span class="keyword">dynamicType</span>)</span>"</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"b type:<span class="subst">\(b.<span class="keyword">dynamicType</span>)</span>"</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"c type:<span class="subst">\(<span class="built_in">c</span>.<span class="keyword">dynamicType</span>)</span>"</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"d type:<span class="subst">\(d.<span class="keyword">dynamicType</span>)</span>"</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"e type:<span class="subst">\(e.<span class="keyword">dynamicType</span>)</span>"</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"f type:<span class="subst">\(f.<span class="keyword">dynamicType</span>)</span>\n"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// KVC for NSObject</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooKVC</span> : <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> p1 : <span class="type">String</span> = <span class="string">"s"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fk1 = <span class="type">FooKVC</span>()</span><br><span class="line"></span><br><span class="line">fk1.p1</span><br><span class="line"></span><br><span class="line">fk1.setValue(<span class="string">"y"</span>, forKey: <span class="string">"p1"</span>)</span><br><span class="line"></span><br><span class="line">fk1.p1</span><br><span class="line"></span><br><span class="line"><span class="comment">// reflect for swift2.0</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">"namevalue"</span></span><br><span class="line">    <span class="keyword">var</span> age = <span class="number">123</span></span><br><span class="line">    <span class="keyword">var</span> some:(<span class="type">String</span>, <span class="type">Int</span>) = (<span class="string">"ming"</span>, <span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a1 = <span class="type">A</span>()</span><br><span class="line"></span><br><span class="line">a1.age = <span class="number">456</span></span><br><span class="line"></span><br><span class="line">a1.age</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> r = <span class="type">Mirror</span>(reflecting: a1)</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">c</span> <span class="keyword">in</span> r.children &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">c</span>.label.<span class="keyword">dynamicType</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">c</span>.label)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">c</span>.value.<span class="keyword">dynamicType</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">c</span>.value)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"==="</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>KVO for NSObject 略, 注意监听者与被监听者都要是 NSObject 子类</li>
</ul>
<h3 id="JSONModel_for_swift?">JSONModel for swift?</h3><p>&gt;<br>NB: Swift works in a different way under the hood than Objective-C. Therefore I can’t find a way to re-create JSONModel in Swift. JSONModel in Objective-C works in Swift apps through CocoaPods or as an imported Objective-C library.</p>
<h3 id="JSONModel_做的事情">JSONModel 做的事情</h3><ul>
<li>String(NSData) -&gt; Dictionary(Array)</li>
<li>Dictionary(Array) -&gt; Model-Object</li>
</ul>
<h3 id="对应实现">对应实现</h3><ul>
<li>容易:<ul>
<li>swift 容器取值的坑 <a href="https://github.com/SwiftyJSON/SwiftyJSON" target="_blank" rel="external">https://github.com/SwiftyJSON/SwiftyJSON</a></li>
</ul>
</li>
<li>swift 反射不支持赋值，没办法<ul>
<li>通过 NSObject KVC 解决 <a href="https://github.com/PonyCui/PPJSONSerialization" target="_blank" rel="external">https://github.com/PonyCui/PPJSONSerialization</a></li>
<li>临时方案？</li>
</ul>
</li>
</ul>
<h3 id="参考链接">参考链接</h3><ul>
<li><a href="https://github.com/leemorgan/Swift-KVC/blob/master/KVC%20Playground.playground/Contents.swift" target="_blank" rel="external">Swift-KVC (just <code>valueForKey:</code>)</a></li>
<li><a href="http://www.jianshu.com/p/e036e53d240e" target="_blank" rel="external">Swift: KVO 注意事项和属性观察器</a></li>
<li><a href="http://stackoverflow.com/questions/24844681/list-of-classs-properties-in-swift" target="_blank" rel="external">List of class’s properties in swift</a></li>
</ul>
<hr>
<h2 id="RATreeView的简单使用_-_张超耀">RATreeView的简单使用 - 张超耀</h2><h3 id="RATreeView:实现树形结构的TableView；点击每个cell，都可以展开出现新的cell；可以自定义树的层数">RATreeView:实现树形结构的TableView；点击每个cell，都可以展开出现新的cell；可以自定义树的层数</h3><p><img src="https://camo.githubusercontent.com/87d3db881cf57dba674a89a6e1460c00277245b3/68747470733a2f2f7261772e6769746875622e636f6d2f417567757374796e69616b2f524154726565566965772f6d61737465722f53637265656e732f616e696d6174696f6e2e676966" alt=""></p>
<h3 id="主要方法介绍">主要方法介绍</h3><ul>
<li>cell的高度<br><code>-(CGFloat)treeView:(RATreeView *)treeView heightForRowForItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo</code></li>
<li>这个函数决定是否可以展开，通过设定我们可以设置哪些单元格可以展开到下一层，哪些不可以展开<br><code>- (BOOL)treeView:(RATreeView *)treeView shouldExpandItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo</code> </li>
<li><p>这个看字面意识就理解了，在单元格显示之前（或者说将要显示时）我们可以做些设置，这里是设置相应深度的颜色背景<br><code>- (void)treeView:(RATreeView *)treeView willDisplayCell:(UITableViewCell *)cell forItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo</code></p>
</li>
<li><p>这里就是我们最熟悉的点击cell处理函数，看代码慢慢体会treeNodeInfo的使用，不想多说了<br><code>-(void)treeView:(RATreeView *)treeView didSelectRowForItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo</code></p>
</li>
<li>数据源处理，相当于UITableViewCell处理，关键还是理解treeNodeInfo概念<br><code>- (UITableViewCell *)treeView:(RATreeView *)treeView cellForItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo</code></li>
<li>返回每一层包含成员的个数，来制表<br><code>- (NSInteger)treeView:(RATreeView *)treeView numberOfChildrenOfItem:(id)item</code></li>
<li>返回cell对象<br><code>- (id)treeView:(RATreeView *)treeView child:(NSInteger)index ofItem:(id)item</code><h3 id="RATreeView_-_github"><a href="https://github.com/Augustyniak/RATreeView" target="_blank" rel="external">RATreeView - github</a></h3></li>
</ul>
<hr>
<h2 id="Facebook_开源的图片加载库Fresco_-_王胜">Facebook 开源的图片加载库Fresco - 王胜</h2><h3 id="Fresco诞生背景">Fresco诞生背景</h3><p>为提高Android中图片的加载速度，一般的图片库都采用了三级缓存：Memory Cache、Disk Cache和Network。但是，Android的系统层是将物理内存平均分配给每一个App。这样每个App所分配的空间都是有限的，早起的android设备，每个App只被分配16MB空间，这样，如果App中使用大量的图片，那么很容易因OOM而Crashes掉。Facebook App正是大量使用图片的App，面临这个问题刻不容缓，所以他们历尽艰难，开发了Fresco图片加载库。 </p>
<h3 id="Fresco诞生过程">Fresco诞生过程</h3><h4 id="内存区域分析：">内存区域分析：</h4><ul>
<li><p>Java heap</p>
<p>每个厂商会为App分配一个固定尺寸的运行空间。所有的申请通过Java的new操作申请，操作相对安全，通过GC内存自动回收保证内存不被泄露。但不幸的时，GC不够精确化，回收得不够及时。因此还是会存在OOM。</p>
</li>
<li><p>Native heap</p>
<p>通过C或者C++可绕过Java虚拟机直接操作物理内存，但Java程序员习惯了GC的自动回收，很难操作C++的手动操作内存。</p>
</li>
<li><p>Ashmen</p>
<p>Android还有一块内存区域，叫Ashmen。这里的操作很像Nativew heap，但是这里是系统调用的。Java 应用程序是不能直接访问Ashmen的，但是一些例外的情况可以操作，图片就是一种例外。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">BitmapFactory.Options = <span class="keyword">new</span> BitmapFactory.Options();</span><br><span class="line">options.inPurgeable = <span class="keyword">true</span>;</span><br><span class="line">Bitmap bitmap = BitmapFactory.decodeByteArray(jpeg, <span class="number">0</span>, jpeg.length, options);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="难点突破：">难点突破：</h4><p>尽管发现了Purgeable bitmaps，但是这个解码的过程是在UI线程操作的，因此他们又采用了异步实现，并保证了UI线程不引用时，unpin的区域不会被释放。</p>
<h4 id="上层构建">上层构建</h4><p>提供给上层调用时，采用了MVC的架构：</p>
<ul>
<li>Model：DraweeHierarchy</li>
<li>Control：DraweeControllers</li>
<li>View：DraweeViews</li>
</ul>
<h3 id="使用示例">使用示例</h3><ol>
<li><p>gradle配置中添加库引用</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="string">'com.facebook.fresco:fresco:0.6.1+'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>xml中添加组件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">com.facebook.drawee.view.SimpleDraweeView</span></span><br><span class="line">      <span class="attribute">android:id</span>=<span class="value">"@+id/sdv"</span></span><br><span class="line">      <span class="attribute">android:layout_width</span>=<span class="value">"match_parent"</span></span><br><span class="line">      <span class="attribute">android:layout_height</span>=<span class="value">"match_parent"</span></span><br><span class="line">      <span class="attribute">fresco:roundAsCircle</span>=<span class="value">"true"</span></span><br><span class="line">      <span class="attribute">fresco:roundingBorderWidth</span>=<span class="value">"1dp"</span></span><br><span class="line">      <span class="attribute">fresco:roundingBorderColor</span>=<span class="value">"#00ff00"</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>代码中指定图片地址</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SimpleDraweeView sdv = (SimpleDraweeView) findViewById(R.id.sdv);</span><br><span class="line">sdv.setImageURI(Uri.parse(<span class="string">"http://g.hiphotos.baidu.com/image/pic/item/2e2eb9389b504fc2b351980be7dde71190ef6db5.jpg"</span>));</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="参考资料：">参考资料：</h3><ul>
<li><a href="https://code.facebook.com/posts/366199913563917/introducing-fresco-a-new-image-library-for-android/" target="_blank" rel="external">Fresco的由来</a></li>
<li><a href="http://github.com/facebook/fresco" target="_blank" rel="external">Fresco的源码托管</a></li>
<li><a href="http://fresco-cn.org/docs/index.html" target="_blank" rel="external">中文使用手册</a></li>
</ul>
<hr>
<h1 id="SIAlertView_阅读_-_潘君">SIAlertView 阅读 - 潘君</h1><ul>
<li>创建自定义alert view的流程</li>
</ul>
<p>自定义window-&gt;添加自定义view controller-&gt;定制view-&gt;view引用window</p>
<ul>
<li>@class<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">class</span> <span class="title">SIAlertView</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>能不使用import的就不使用<br>用@class代替</p>
<ul>
<li><p>通知 和 Block</p>
</li>
<li><p>层级</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">UIWindowLevel</span> <span class="built_in">UIWindowLevelSIAlert</span> = <span class="number">1996.0</span>;  <span class="comment">// don't overlap system's alert</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">UIWindowLevel</span> <span class="built_in">UIWindowLevelSIAlertBackground</span> = <span class="number">1985.0</span>; <span class="comment">// below the alert window</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>UIViewTintAdjustmentMode<br>通过获取keyWindow的<code>UIViewTintAdjustmentMode</code>来设置alertWindow的<br>该属性能够设置tint的调整模式</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123;</span><br><span class="line">     <span class="comment">// 和父视图的一样</span></span><br><span class="line">     <span class="built_in">UIViewTintAdjustmentModeAutomatic</span>,              </span><br><span class="line">     <span class="comment">// 不对tintColor做任何修改</span></span><br><span class="line">     <span class="built_in">UIViewTintAdjustmentModeNormal</span>,</span><br><span class="line">     <span class="comment">// 在原有tintColor基础上变暗</span></span><br><span class="line">     <span class="built_in">UIViewTintAdjustmentModeDimmed</span>,&#125;<span class="built_in">UIViewTintAdjustmentMode</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>iOS特有版本代码</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="id">#ifdef</span> __IPHONE_7_0</span><br><span class="line"><span class="comment">//some code </span></span><br><span class="line"><span class="id">#endif</span></span><br><span class="line">此处填写iOS7才能运行的代码</span><br></pre></td></tr></table></figure>
</li>
<li><p>initialize</p>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="keyword">void</span>)initialize</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (self != [SIAlertView <span class="keyword">class</span>])</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">// 默认值赋值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">一些值放在+(<span class="keyword">void</span>)initialize；中赋值为默认值，这样不管通过何种方式初始化</span><br></pre></td></tr></table></figure>
</li>
<li><p>UIAppearance<br>SIAlertView *appearance = [self appearance];<br>UIView符合UIAppearence协议，能够全局修改所有实例的UI</p>
</li>
<li><p>调用Bundle中资源<br>[UIImage imageNamed:@”SIAlertView.bundle/button-default”]<br>bundle中资源的调用方法</p>
</li>
</ul>
<ul>
<li><p>_cmd<br>oc特有的方法，无法通过c语言获取</p>
</li>
<li><p>[self invalidateLayout]</p>
</li>
<li><p>合理利用循环引用</p>
</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="keyword">self</span><span class="variable">.alertWindow</span>) &#123;</span><br><span class="line">    <span class="built_in">UIWindow</span> *window = [[<span class="built_in">UIWindow</span> alloc] initWithFrame:[<span class="built_in">UIScreen</span> mainScreen]<span class="variable">.bounds</span>];</span><br><span class="line">    window<span class="variable">.autoresizingMask</span> = <span class="built_in">UIViewAutoresizingFlexibleWidth</span> | <span class="built_in">UIViewAutoresizingFlexibleHeight</span>;</span><br><span class="line">    window<span class="variable">.opaque</span> = <span class="literal">NO</span>;</span><br><span class="line">    window<span class="variable">.windowLevel</span> = <span class="built_in">UIWindowLevelSIAlert</span>;</span><br><span class="line">    window<span class="variable">.rootViewController</span> = viewController;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.alertWindow</span> = window;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>oldKeyWindow<br>通知alert后面的视图转变方向<br>取用一些oldKeyWindow的值</li>
</ul>
<hr>
<h2 id="android饼图库_-吴明">android饼图库 -吴明</h2><ul>
<li>饼图选择<ul>
<li><a href="https://github.com/jondwillis/AChartEngine/tree/master/achartengine" target="_blank" rel="external">AChartEngine</a>:(太丑了)</li>
<li><a href="https://github.com/xcltapestry/XCL-Charts" target="_blank" rel="external">xcl-charts</a>:(接口文档没有)</li>
<li><a href="https://github.com/lecho/hellocharts-android" target="_blank" rel="external">HelloCharts</a>:(接口文档没有)</li>
<li><a href="https://github.com/PhilJay/MPAndroidChart" target="_blank" rel="external">MPAndroidChart</a>:(接口文档多)</li>
</ul>
</li>
<li><a href="https://github.com/PhilJay/MPAndroidChart" target="_blank" rel="external">MPAndroidChart</a><ul>
<li><img src="https://camo.githubusercontent.com/7e8a4a3c938c21d032d44d999edd781b6e146f2a/68747470733a2f2f7261772e6769746875622e636f6d2f5068696c4a61792f4d50416e64726f696443686172742f6d61737465722f73637265656e73686f74732f73696d706c6564657369676e5f7069656368617274312e706e67" alt="Alt Image Text"></li>
<li>饼图对象:PieChat</li>
<li><a href="https://github.com/PhilJay/MPAndroidChart/wiki" target="_blank" rel="external">详见接口文档</a></li>
</ul>
</li>
</ul>
<hr>
<h2 id="HeaderFooterRecyclerViewAdapter——李仙鹏">HeaderFooterRecyclerViewAdapter——李仙鹏</h2><p><a href="https://gist.github.com/mheras/0908873267def75dc746" target="_blank" rel="external">HeaderFooterRecyclerViewAdapter</a>，用于RecyclerView。可方便的添加header或者footer。使用非常简单，只需要按照实际需求，在对应的header、content、footer相关方法进行重写即可。</p>
<p>附上源码</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HeaderFooterRecyclerViewAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">RecyclerView</span>.<span class="title">ViewHolder</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> VIEW_TYPE_MAX_COUNT = <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> HEADER_VIEW_TYPE_OFFSET = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FOOTER_VIEW_TYPE_OFFSET = HEADER_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CONTENT_VIEW_TYPE_OFFSET = FOOTER_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> headerItemCount;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> contentItemCount;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> footerItemCount;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * &#123;<span class="doctag">@inheritDoc</span>&#125;</span><br><span class="line">     */</span></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Delegate to proper methods based on the viewType ranges.</span></span><br><span class="line">        <span class="keyword">if</span> (viewType &gt;= HEADER_VIEW_TYPE_OFFSET &amp;&amp; viewType &lt; HEADER_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT) &#123;</span><br><span class="line">            <span class="function"><span class="keyword">return</span> <span class="title">onCreateHeaderItemViewHolder</span><span class="params">(parent, viewType - HEADER_VIEW_TYPE_OFFSET)</span></span>;</span><br><span class="line">        &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(viewType &gt;= FOOTER_VIEW_TYPE_OFFSET &amp;&amp; viewType &lt; FOOTER_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT)</span> </span>&#123;</span><br><span class="line">            <span class="function"><span class="keyword">return</span> <span class="title">onCreateFooterItemViewHolder</span><span class="params">(parent, viewType - FOOTER_VIEW_TYPE_OFFSET)</span></span>;</span><br><span class="line">        &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(viewType &gt;= CONTENT_VIEW_TYPE_OFFSET &amp;&amp; viewType &lt; CONTENT_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT)</span> </span>&#123;</span><br><span class="line">            <span class="function"><span class="keyword">return</span> <span class="title">onCreateContentItemViewHolder</span><span class="params">(parent, viewType - CONTENT_VIEW_TYPE_OFFSET)</span></span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// This shouldn't happen as we check that the viewType provided by the client is valid.</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * &#123;<span class="doctag">@inheritDoc</span>&#125;</span><br><span class="line">     */</span></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(RecyclerView.ViewHolder viewHolder, <span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Delegate to proper methods based on the viewType ranges.</span></span><br><span class="line">        <span class="keyword">if</span> (headerItemCount &gt; <span class="number">0</span> &amp;&amp; position &lt; headerItemCount) &#123;</span><br><span class="line">            onBindHeaderItemViewHolder(viewHolder, position);</span><br><span class="line">        &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(contentItemCount &gt; <span class="number">0</span> &amp;&amp; position - headerItemCount &lt; contentItemCount)</span> </span>&#123;</span><br><span class="line">            onBindContentItemViewHolder(viewHolder, position - headerItemCount);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            onBindFooterItemViewHolder(viewHolder, position - headerItemCount - contentItemCount);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * &#123;<span class="doctag">@inheritDoc</span>&#125;</span><br><span class="line">     */</span></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Cache the counts and return the sum of them.</span></span><br><span class="line">        headerItemCount = getHeaderItemCount();</span><br><span class="line">        contentItemCount = getContentItemCount();</span><br><span class="line">        footerItemCount = getFooterItemCount();</span><br><span class="line">        <span class="keyword">return</span> headerItemCount + contentItemCount + footerItemCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * &#123;<span class="doctag">@inheritDoc</span>&#125;</span><br><span class="line">     */</span></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">int</span> <span class="title">getItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Delegate to proper methods based on the position, but validate first.</span></span><br><span class="line">        <span class="keyword">if</span> (headerItemCount &gt; <span class="number">0</span> &amp;&amp; position &lt; headerItemCount) &#123;</span><br><span class="line">            <span class="keyword">return</span> validateViewType(getHeaderItemViewType(position)) + HEADER_VIEW_TYPE_OFFSET;</span><br><span class="line">        &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(contentItemCount &gt; <span class="number">0</span> &amp;&amp; position - headerItemCount &lt; contentItemCount)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> validateViewType(getContentItemViewType(position - headerItemCount)) + CONTENT_VIEW_TYPE_OFFSET;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> validateViewType(getFooterItemViewType(position - headerItemCount - contentItemCount)) + FOOTER_VIEW_TYPE_OFFSET;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Validates that the view type is within the valid range.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> viewType the view type.</span><br><span class="line">     * <span class="doctag">@return</span> the given view type.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">int</span> <span class="title">validateViewType</span><span class="params">(<span class="keyword">int</span> viewType)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (viewType &lt; <span class="number">0</span> || viewType &gt;= VIEW_TYPE_MAX_COUNT) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"viewType must be between 0 and "</span> + VIEW_TYPE_MAX_COUNT);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> viewType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that a header item is inserted.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> position the position of the header item.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemInserted</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> newHeaderItemCount = getHeaderItemCount();</span><br><span class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= newHeaderItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for header items [0 - "</span> + (newHeaderItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemInserted(position);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that multiple header items are inserted.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> positionStart the position.</span><br><span class="line">     * <span class="doctag">@param</span> itemCount     the item count.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemRangeInserted</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> newHeaderItemCount = getHeaderItemCount();</span><br><span class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; newHeaderItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for header items [0 - "</span> + (newHeaderItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemRangeInserted(positionStart, itemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that a header item is changed.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> position the position.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemChanged</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= headerItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for header items [0 - "</span> + (headerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemChanged(position);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that multiple header items are changed.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> positionStart the position.</span><br><span class="line">     * <span class="doctag">@param</span> itemCount     the item count.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemRangeChanged</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt;= headerItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for header items [0 - "</span> + (headerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemRangeChanged(positionStart, itemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that an existing header item is moved to another position.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> fromPosition the original position.</span><br><span class="line">     * <span class="doctag">@param</span> toPosition   the new position.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemMoved</span><span class="params">(<span class="keyword">int</span> fromPosition, <span class="keyword">int</span> toPosition)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (fromPosition &lt; <span class="number">0</span> || toPosition &lt; <span class="number">0</span> || fromPosition &gt;= headerItemCount || toPosition &gt;= headerItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given fromPosition "</span> + fromPosition + <span class="string">" or toPosition "</span> + toPosition + <span class="string">" is not within the position bounds for header items [0 - "</span> + (headerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemMoved(fromPosition, toPosition);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that a header item is removed.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> position the position.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemRemoved</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= headerItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for header items [0 - "</span> + (headerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemRemoved(position);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that multiple header items are removed.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> positionStart the position.</span><br><span class="line">     * <span class="doctag">@param</span> itemCount     the item count.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemRangeRemoved</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; headerItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for header items [0 - "</span> + (headerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemRangeRemoved(positionStart, itemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that a content item is inserted.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> position the position of the content item.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemInserted</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> newHeaderItemCount = getHeaderItemCount();</span><br><span class="line">        <span class="keyword">int</span> newContentItemCount = getContentItemCount();</span><br><span class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= newContentItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for content items [0 - "</span> + (newContentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemInserted(position + newHeaderItemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that multiple content items are inserted.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> positionStart the position.</span><br><span class="line">     * <span class="doctag">@param</span> itemCount     the item count.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemRangeInserted</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> newHeaderItemCount = getHeaderItemCount();</span><br><span class="line">        <span class="keyword">int</span> newContentItemCount = getContentItemCount();</span><br><span class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; newContentItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for content items [0 - "</span> + (newContentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemRangeInserted(positionStart + newHeaderItemCount, itemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that a content item is changed.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> position the position.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemChanged</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= contentItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for content items [0 - "</span> + (contentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemChanged(position + headerItemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that multiple content items are changed.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> positionStart the position.</span><br><span class="line">     * <span class="doctag">@param</span> itemCount     the item count.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemRangeChanged</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; contentItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for content items [0 - "</span> + (contentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemRangeChanged(positionStart + headerItemCount, itemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that an existing content item is moved to another position.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> fromPosition the original position.</span><br><span class="line">     * <span class="doctag">@param</span> toPosition   the new position.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemMoved</span><span class="params">(<span class="keyword">int</span> fromPosition, <span class="keyword">int</span> toPosition)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (fromPosition &lt; <span class="number">0</span> || toPosition &lt; <span class="number">0</span> || fromPosition &gt;= contentItemCount || toPosition &gt;= contentItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given fromPosition "</span> + fromPosition + <span class="string">" or toPosition "</span> + toPosition + <span class="string">" is not within the position bounds for content items [0 - "</span> + (contentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemMoved(fromPosition + headerItemCount, toPosition + headerItemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that a content item is removed.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> position the position.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemRemoved</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= contentItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for content items [0 - "</span> + (contentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemRemoved(position + headerItemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that multiple content items are removed.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> positionStart the position.</span><br><span class="line">     * <span class="doctag">@param</span> itemCount     the item count.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemRangeRemoved</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; contentItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for content items [0 - "</span> + (contentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemRangeRemoved(positionStart + headerItemCount, itemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that a footer item is inserted.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> position the position of the content item.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemInserted</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> newHeaderItemCount = getHeaderItemCount();</span><br><span class="line">        <span class="keyword">int</span> newContentItemCount = getContentItemCount();</span><br><span class="line">        <span class="keyword">int</span> newFooterItemCount = getFooterItemCount();</span><br><span class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= newFooterItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for footer items [0 - "</span> + (newFooterItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemInserted(position + newHeaderItemCount + newContentItemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that multiple footer items are inserted.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> positionStart the position.</span><br><span class="line">     * <span class="doctag">@param</span> itemCount     the item count.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemRangeInserted</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> newHeaderItemCount = getHeaderItemCount();</span><br><span class="line">        <span class="keyword">int</span> newContentItemCount = getContentItemCount();</span><br><span class="line">        <span class="keyword">int</span> newFooterItemCount = getFooterItemCount();</span><br><span class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; newFooterItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for footer items [0 - "</span> + (newFooterItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemRangeInserted(positionStart + newHeaderItemCount + newContentItemCount, itemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that a footer item is changed.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> position the position.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemChanged</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= footerItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for footer items [0 - "</span> + (footerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemChanged(position + headerItemCount + contentItemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that multiple footer items are changed.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> positionStart the position.</span><br><span class="line">     * <span class="doctag">@param</span> itemCount     the item count.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemRangeChanged</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; footerItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for footer items [0 - "</span> + (footerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemRangeChanged(positionStart + headerItemCount + contentItemCount, itemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that an existing footer item is moved to another position.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> fromPosition the original position.</span><br><span class="line">     * <span class="doctag">@param</span> toPosition   the new position.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemMoved</span><span class="params">(<span class="keyword">int</span> fromPosition, <span class="keyword">int</span> toPosition)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (fromPosition &lt; <span class="number">0</span> || toPosition &lt; <span class="number">0</span> || fromPosition &gt;= footerItemCount || toPosition &gt;= footerItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given fromPosition "</span> + fromPosition + <span class="string">" or toPosition "</span> + toPosition + <span class="string">" is not within the position bounds for footer items [0 - "</span> + (footerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemMoved(fromPosition + headerItemCount + contentItemCount, toPosition + headerItemCount + contentItemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that a footer item is removed.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> position the position.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemRemoved</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= footerItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for footer items [0 - "</span> + (footerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemRemoved(position + headerItemCount + contentItemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Notifies that multiple footer items are removed.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> positionStart the position.</span><br><span class="line">     * <span class="doctag">@param</span> itemCount     the item count.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemRangeRemoved</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; footerItemCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for footer items [0 - "</span> + (footerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        notifyItemRangeRemoved(positionStart + headerItemCount + contentItemCount, itemCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Gets the header item view type. By default, this method returns 0.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> position the position.</span><br><span class="line">     * <span class="doctag">@return</span> the header item view type (within the range [0 - VIEW_TYPE_MAX_COUNT-1]).</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">int</span> <span class="title">getHeaderItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Gets the footer item view type. By default, this method returns 0.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> position the position.</span><br><span class="line">     * <span class="doctag">@return</span> the footer item view type (within the range [0 - VIEW_TYPE_MAX_COUNT-1]).</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">int</span> <span class="title">getFooterItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Gets the content item view type. By default, this method returns 0.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> position the position.</span><br><span class="line">     * <span class="doctag">@return</span> the content item view type (within the range [0 - VIEW_TYPE_MAX_COUNT-1]).</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">int</span> <span class="title">getContentItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Gets the header item count. This method can be called several times, so it should not calculate the count every time.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@return</span> the header item count.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">int</span> <span class="title">getHeaderItemCount</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Gets the footer item count. This method can be called several times, so it should not calculate the count every time.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@return</span> the footer item count.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">int</span> <span class="title">getFooterItemCount</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Gets the content item count. This method can be called several times, so it should not calculate the count every time.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@return</span> the content item count.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">int</span> <span class="title">getContentItemCount</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * This method works exactly the same as &#123;<span class="doctag">@link</span> #onCreateViewHolder(android.view.ViewGroup, int)&#125;, but for header items.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> parent         the parent view.</span><br><span class="line">     * <span class="doctag">@param</span> headerViewType the view type for the header.</span><br><span class="line">     * <span class="doctag">@return</span> the view holder.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateHeaderItemViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> headerViewType)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * This method works exactly the same as &#123;<span class="doctag">@link</span> #onCreateViewHolder(android.view.ViewGroup, int)&#125;, but for footer items.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> parent         the parent view.</span><br><span class="line">     * <span class="doctag">@param</span> footerViewType the view type for the footer.</span><br><span class="line">     * <span class="doctag">@return</span> the view holder.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateFooterItemViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> footerViewType)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * This method works exactly the same as &#123;<span class="doctag">@link</span> #onCreateViewHolder(android.view.ViewGroup, int)&#125;, but for content items.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> parent          the parent view.</span><br><span class="line">     * <span class="doctag">@param</span> contentViewType the view type for the content.</span><br><span class="line">     * <span class="doctag">@return</span> the view holder.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateContentItemViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> contentViewType)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * This method works exactly the same as &#123;<span class="doctag">@link</span> #onBindViewHolder(android.support.v7.widget.RecyclerView.ViewHolder, int)&#125;, but for header items.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> headerViewHolder the view holder for the header item.</span><br><span class="line">     * <span class="doctag">@param</span> position         the position.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">void</span> <span class="title">onBindHeaderItemViewHolder</span><span class="params">(RecyclerView.ViewHolder headerViewHolder, <span class="keyword">int</span> position)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * This method works exactly the same as &#123;<span class="doctag">@link</span> #onBindViewHolder(android.support.v7.widget.RecyclerView.ViewHolder, int)&#125;, but for footer items.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> footerViewHolder the view holder for the footer item.</span><br><span class="line">     * <span class="doctag">@param</span> position         the position.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">void</span> <span class="title">onBindFooterItemViewHolder</span><span class="params">(RecyclerView.ViewHolder footerViewHolder, <span class="keyword">int</span> position)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * This method works exactly the same as &#123;<span class="doctag">@link</span> #onBindViewHolder(android.support.v7.widget.RecyclerView.ViewHolder, int)&#125;, but for content items.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> contentViewHolder the view holder for the content item.</span><br><span class="line">     * <span class="doctag">@param</span> position          the position.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">void</span> <span class="title">onBindContentItemViewHolder</span><span class="params">(RecyclerView.ViewHolder contentViewHolder, <span class="keyword">int</span> position)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post- 聊聊提高代码质量" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/14/ 聊聊提高代码质量/" class="article-date">
  	<time datetime="2015-08-14T13:08:35.000Z" itemprop="datePublished">2015-08-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/14/ 聊聊提高代码质量/">聊聊提高代码质量</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="什么样的代码才是好的——李仙鹏">什么样的代码才是好的——李仙鹏</h2><h3 id="我所理解的好代码">我所理解的好代码</h3><ul>
<li><p>代码规范——可读性</p>
<ul>
<li>统一命名方式（<a href="http://www.hawstein.com/posts/google-java-style.html" target="_blank" rel="external">Google Java代码风格</a>）</li>
<li>尽量不要出现magic number</li>
<li>清晰的代码注释文档（<a href="http://www.importnew.com/16459.html#rd?sukey=fc78a68049a14bb28cbb47b788e9ade0d111f3c2348d187194837eb45a0be9421f2e0aad0fec6b2290f2a561779caea1" target="_blank" rel="external">改善Java文档的理由、建议和技巧</a>）</li>
<li>控制方法或者函数的细粒度</li>
<li>减少代码冗余</li>
</ul>
</li>
<li><p>代码耦合低——可扩展性、可移植性</p>
<ul>
<li>尽量采用接口实现，减少继承</li>
<li>通用功能尽量抽取作为一个独立的方法，避免重复造轮子</li>
<li>设计模式并不能提高代码执行效率，但容易对代码进行模块切分，从而进行代码的解耦合。设计模式也可以算是程序员的一种通用“语言“，方便程序员之间的沟通.<ul>
<li>根据不同OS或者语言特性，从大的架构上遵循MVC或者MVP或者其它类似的层次分明的设计模式。</li>
</ul>
</li>
</ul>
</li>
<li><p>严格的code review</p>
<ul>
<li>能够发现潜在的bug、不合理的实现和是否遵从代码规范</li>
<li>有助于代码提交人员对自身代码质量的要求——面子问题</li>
</ul>
</li>
<li><p>性能</p>
</li>
</ul>
<blockquote>
<p>以上这些点都是为了程序的健壮性、可扩展性、可移植性。最终目标，在核心开发人员变动或者产品需求变动后，都不会对代码维护、版本迭代和程序稳定性造成重大影响。</p>
</blockquote>
<h3 id="51offer-v2-5-0重写中，我们是如何做的">51offer-v2.5.0重写中，我们是如何做的</h3><ul>
<li><p>整体架构上采用<a href="http://baike.baidu.com/view/3456444.htm" target="_blank" rel="external">MVP模式</a></p>
<ul>
<li>V和P通过接口实现交互，M只被P处理，P处理完后通过接口反馈给V<br><img src="http://magenic.com/Portals/0/xBlog/uploads/2015/4/10/presenter-view-model-1-mvp-pattern-for-android-jeff-angellini.png" alt="MVP"></li>
</ul>
</li>
<li><p>代码可移植性和可扩展性</p>
<ul>
<li>按照是否通用原则，命名包名——非通用包名，放在offer包下；通用功能模块，放在非offer包下。这样有利于快速移植，或者打成JAR包</li>
<li>接口实现，减少继承——在类的继承中，减少继承体系中每层父类的职责范围</li>
</ul>
</li>
<li><p>HTTP请求</p>
<ul>
<li>底层请求采用<a href="http://square.github.io/okhttp/" target="_blank" rel="external">OkHttp</a>，<a href="http://square.github.io/okhttp/" target="_blank" rel="external">OkHttp</a>默认实现的功能为：<ul>
<li>支持协议——<a href="http://baike.baidu.com/view/11521153.htm" target="_blank" rel="external">HTTP/2</a>和<a href="http://baike.baidu.com/view/2984528.htm" target="_blank" rel="external">SPDY</a>, 可以合并多个到同一个主机的请求<ul>
<li>使用连接池技术减少请求的延迟</li>
<li>使用GZIP压缩减少传输的数据量</li>
<li>报文缓存响应，避免重复的网络请求</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>json解析</p>
<ul>
<li><a href="https://sites.google.com/site/gson/gson-user-guide" target="_blank" rel="external">Gson</a>，这是<a href="http://www.open-open.com/lib/view/open1434377191317.html" target="_blank" rel="external">综合考虑Json使用场景后的选择结果</a>——方便json字符串到对象之间的转换、<a href="https://sites.google.com/site/gson/gson-user-guide" target="_blank" rel="external">Gson</a>在处理短的json时速度比较快、<a href="https://sites.google.com/site/gson/gson-user-guide" target="_blank" rel="external">Gson</a>不需要太多的注解</li>
</ul>
</li>
<li><p>图片加载</p>
<ul>
<li><p>采用<a href="https://github.com/nostra13/Android-Universal-Image-Loader" target="_blank" rel="external">Android-Universal-Image-Loader</a></p>
<ul>
<li>多线程图片加载</li>
<li>可自定义的加载器</li>
<li>可自定义的图片显示回调</li>
<li>图片三级缓存——内存和硬盘缓存的图片通过多种数据结构管理</li>
<li>监听加载过程</li>
</ul>
</li>
<li><p>bitmap显示质量设置为RGB_565——一个像素需要16位表示，Android中默认为ARGB_8888——一个像素需要32位表示。这种方式在<strong><em>基本保障图片质量要求</em></strong>的同时，还能够大大减少手机的内存占用</p>
</li>
</ul>
</li>
<li><p>数据存储</p>
<ul>
<li>由于目前客户端还未涉及到大量数据和离线加载模式，所以我们暂不使用数据库（以后在做IM或者离线加载时，会考虑使用ORM来访问数据库），综合速度考虑使用Android的SharedPreference</li>
</ul>
</li>
</ul>
<h2 id="组件通信库EventBus_-_吴强">组件通信库EventBus - 吴强</h2><p>  EventBus是一个Android端优化的publish/subscribe消息总线，简化了应用程序内各组件间、组件与后台线程间的通信。</p>
<h3 id="三个主要元素：">三个主要元素：</h3><ul>
<li>Event：事件<blockquote>
<p>Event可以是任意类型的对象</p>
</blockquote>
</li>
<li>Subscriber：事件订阅者，接收特定的事件<blockquote>
<p>在EventBus中，使用约定来指定事件订阅者以简化使用。即所有事件订阅都都是以onEvent开头的函数，具体来说，函数的名字是onEvent，onEventMainThread，onEventBackgroundThread，onEventAsync这四个</p>
</blockquote>
</li>
<li>Publisher:事件发布者，用于通知Subscriber有事件发生<blockquote>
<p>可以在任意线程任意位置发送事件，直接调用EventBus的post(Object)方法，可以自己实例化EventBus对象，但一般使用默认的单例就好了：EventBus.getDefault()，根据post函数参数的类型，会自动调用订阅相应类型事件的函数。</p>
</blockquote>
</li>
</ul>
<h3 id="ThreadMode">ThreadMode</h3><p>  Subscriber函数的名字只能是那4个，因为每个事件订阅函数都是和一个ThreadMode相关联的，ThreadMode指定了会调用的函数。有以下四个ThreadMode：</p>
<ul>
<li>PostThread:<br>事件的处理在和事件的发送在相同的进程，所以事件处理时间不应太长，不然影响事件的发送线程，而这个线程可能是UI线程。对应的函数名是onEvent。</li>
<li>MainThread:<br>事件的处理会在UI线程中执行。事件处理时间不能太长，这个不用说的，长了会ANR的，对应的函数名是onEventMainThread。</li>
<li>BackgroundThread:<br>事件的处理会在一个后台线程中执行，对应的函数名是onEventBackgroundThread，虽然名字是BackgroundThread，事件处理是在后台线程，但事件处理时间还是不应该太长，因为如果发送事件的线程是后台线程，会直接执行事件，如果当前线程是UI线程，事件会被加到一个队列中，由一个线程依次处理这些事件，如果某个事件处理时间太长，会阻塞后面的事件的派发或处理。</li>
<li>Async:<br>事件处理会在单独的线程中执行，主要用于在后台线程中执行耗时操作，每个事件会开启一个线程（有线程池），但最好限制线程的数目。</li>
</ul>
<h3 id="注册事件与解除注册">注册事件与解除注册</h3><ul>
<li>通过EventBus.getDefault().register方法可以向EventBus注册来订阅事件</li>
<li>通过registerSticky可以注册Stick事件处理函数</li>
<li>通过EventBus.getDefault().unregister方法解除EventBus事件订阅</li>
</ul>
<h3 id="Post事件">Post事件</h3><ul>
<li>直接调用EventBus.getDefault().post(Event)就可以发送事件，根据Event的类型就可以发送到相应事件的订阅者。</li>
<li>当通过postSticky发送一个事件时，这个类型的事件的最后一次事件会被缓存起来，当有订阅者通过registerSticky注册时，会把之前缓存起来的这个事件直接发送给它</li>
</ul>
<h3 id="缺点">缺点</h3><p>  无法进程间通信，如果一个应用内有多个进程的话就没办法了</p>
<h3 id="注意事项及要点">注意事项及要点</h3><ul>
<li>同一个onEvent函数不能被注册两次，所以不能在一个类中注册同时还在父类中注册</li>
<li>当Post一个事件时，这个事件类的父类的事件也会被Post。</li>
<li>Post的事件无Subscriber处理时会Post <code>NoSubscriberEvent</code>事件，当调用Subscriber失败时会Post <code>SubscriberExceptionEvent</code>事件。</li>
</ul>
<h3 id="其他">其他</h3><p>  EventBus中还有个Util包，主要作用是可以通过AsyncExecutor执行一个Runnable，通过内部的RunnableEx(可以搜索异常的Runnable)当Runnable抛出异常时通过EventBus发消息显示错误对话框。</p>
<p>参考资料：<a href="http://www.cnblogs.com/angeldevil/p/3715934.html" target="_blank" rel="external">快速Android开发系列通信篇之EventBus</a></p>
<h2 id="如何提高代码质量——吴明">如何提高代码质量——吴明</h2><p><img src="http://ww4.sinaimg.cn/large/7cc829d3jw1dpx6ahcgfuj.jpg" alt="Alt text"></p>
<ul>
<li>code review</li>
<li><a href="http://www.hawstein.com/posts/google-java-style.html" target="_blank" rel="external">命名规范</a><ul>
<li>java命名规范:<ul>
<li>java类：m+模块+功能(如:mLoginRegester)</li>
<li>控件类：m+模块+功能+控件缩写(如:mLoginRegesterBtn)</li>
<li>常量:模块+功能(如:SCHOOL_COUNT_MAX)</li>
</ul>
</li>
<li>xml命名规范<ul>
<li>id:模块+功能+控件缩写</li>
</ul>
</li>
<li>color，string，dimen，drawable</li>
<li>图片：模块<em>功能</em>备注_状态</li>
<li>注释</li>
</ul>
</li>
<li>好的框架<ul>
<li>okhttp</li>
<li>Gson</li>
</ul>
</li>
<li>设计模式:<ul>
<li><a href="http://cantellow.iteye.com/blog/838473" target="_blank" rel="external">单例模式</a></li>
<li>工厂模式</li>
<li>策略模式</li>
<li>代理模式</li>
<li><a href="http://blog.csdn.net/cym492224103/article/details/38776873" target="_blank" rel="external">mvp模式</a></li>
</ul>
</li>
<li>处理异常</li>
<li><p>优化性能</p>
</li>
<li><p>代码测试工具:静态代码分析</p>
</li>
</ul>
<h2 id="如何写一份好的代码_-_张超耀">如何写一份好的代码 - 张超耀</h2><h3 id="数据结构和核心算法">数据结构和核心算法</h3><ul>
<li><p>数据结构的重要性：低水平程序员总在考虑代码，高水平程序员总在考虑数据结构及其之间的关系</p>
</li>
<li><p>数据结构决定算法,数据结构考虑清楚了，核心的算法自然就出来了，这就是关于每个类的每个方法如何实现的问题</p>
</li>
</ul>
<h3 id="功能实现">功能实现</h3><ul>
<li><p>思路确定后，实现过程也需要大量的构思活动。碰到比较熟悉有经验的领域，自然可以轻车熟路，但难免会有一些你不太熟悉的技术需要尝试。作为一个程序员，最大的挑战也是最大的乐趣所在，就是不断学习新的技术，没有这样的心态，很快就会落后。</p>
</li>
<li><p>那么遇到不熟悉的技术怎么办？Demo先行，这样做的好处是把单个技术问题和其他潜在的bug隔离开来，便于快速学习新技术。否则，直接在项目里写代码出错以后，要判断问题的源头都要多费好几倍的精力。</p>
</li>
</ul>
<h3 id="测试">测试</h3><ul>
<li>测试很重要，设计测试用例就像开发时设计数据结构一样，也是很关键的。</li>
</ul>
<h3 id="代码可读性">代码可读性</h3><ul>
<li><p>要想自己满意，代码的可读性一定要好。要做到一年后甚至几年后你拿到自己写的代码，还能很容易看明白当时的思路和实现。这就涉及到命名和注释的问题</p>
</li>
<li><p>命名就像超市里的商品标签一样，要让看得人一目了然就知道这是个什么东西</p>
</li>
<li><p>注释也是很重要的，它可以用来说明一段代码的作用，算法的设计思想，或者是方法调用的参数格式要求等</p>
</li>
</ul>
<h3 id="最后总结一下：">最后总结一下：</h3><ul>
<li>技术水平是可以慢慢提高的，但是好的编程习惯需要从一开始就养成，它会让你在前进的道路上事半功倍，受益终生。</li>
</ul>
<h2 id="怎样写好的代码_-_曾铭">怎样写好的代码 - 曾铭</h2><blockquote>
<p>有两种方式构建软件设计：一种是把软件做得很简单以至于明显找不到缺陷；另一种是把它做得很复杂以至于找不到明显的缺陷<br>——C.A.R. Hoare</p>
</blockquote>
<h3 id="谁来写？角色的定义">谁来写？角色的定义</h3><ul>
<li>程序员 vs 工程师</li>
<li>实现功能 vs 解决问题</li>
<li>搭个帐篷 vs 照顾孩子</li>
</ul>
<h3 id="好的代码？">好的代码？</h3><blockquote>
<p>一个程序员更希望接手一个有bug但是看的懂的工程，还是一个没bug但是看不懂的工程？</p>
</blockquote>
<ul>
<li>代码跟人聊天，解释做什么，注释解释为什么这么做，要注意什么</li>
<li>面向接口而不仅仅面向对象</li>
</ul>
<p>举例：在 APP 开发和 API 开发之间，面向 API 文档做开发</p>
<h3 id="写的过程？（推荐开发过程）">写的过程？（推荐开发过程）</h3><ul>
<li>需求明确（理解来源及演进）</li>
<li>整体设计（外在联系，临界条件，错误处理）</li>
<li>实现（验证思路，解决问题及优化）<strong>切记不要拿到需求直接跳到这一步</strong></li>
</ul>
<h3 id="好？目标">好？目标</h3><ul>
<li>可运行，可读，可维护，可测试</li>
<li>参见 TDD，BDD</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 chaoyao.z
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>